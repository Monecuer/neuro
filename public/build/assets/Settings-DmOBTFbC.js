import{r as j,j as e,H as I,b as A}from"./app-J0J4XT7Q.js";import{C as w}from"./CloudUpload-C4LIlrVf.js";import{A as N}from"./AuthenticatedLayout-CV1_pG3T.js";import{S as U}from"./sweetalert2.esm.all-5zhdP7Ax.js";import W from"./MiscSetting-DJWOgRtP.js";import L from"./ModuleSetting-Cv0Ismt-.js";import k from"./Template-DgR8F6gL.js";import H from"./MailSetting-DfGNWSaY.js";import V from"./TelegramSetting-CdH6OoW4.js";import q from"./LoyaltyPointsSetting-Cb-Lzb0u.js";import G from"./CurrencySetting-BPE3OBXF.js";import J from"./BarcodeTemplateEditor-CD283KcR.js";import{B as _}from"./Box-m8-AwHvJ.js";import{T as $,a as h}from"./Tabs-Cl-X88LN.js";import{G as i}from"./Grid-ByMND7DF.js";import{P as g}from"./Paper-CavyNtF_.js";import{C as F}from"./Card-B0NA572v.js";import{C as T}from"./CardMedia-DX-RIBFW.js";import{C as M}from"./CardActions-D9AO_Ds8.js";import{B as f}from"./Button-Bhgpz3NQ.js";import{s as K}from"./memoTheme-BNdxtxoW.js";import{T as x}from"./TextField-B8xGzqYR.js";import{M as y}from"./MenuItem-D4ZeVUNG.js";import{T as z}from"./Typography-CWhVrPo-.js";import{F as v}from"./FormControlLabel-BrfCEOZg.js";import{S as C}from"./Switch-Cdhpx7n_.js";import"./app-CxSMgHDY.js";import"./createSvgIcon-DH-b1jMs.js";import"./clsx-B-dksMZM.js";import"./Payments-C74n1UUC.js";import"./Receipt-CfgyI0Rt.js";import"./index-BOh9Hbob.js";import"./index-B49xHE6m.js";import"./infoshop-CyNm3vmK.js";import"./Toolbar-Bt5N0HeY.js";import"./Divider-CCoppV9R.js";import"./dividerClasses-C03W2_nD.js";import"./List-CA8Dfjeu.js";import"./ListContext-BTargF9Z.js";import"./ListItemButton-ChmwJdM0.js";import"./ListItemText-DbBV3q1i.js";import"./listItemTextClasses-BS0z-cUj.js";import"./useSlot-DIICVg-0.js";import"./useForkRef-npmdbavI.js";import"./TransitionGroupContext-CUmnvxwJ.js";import"./ButtonBase-ah7Qb79a.js";import"./useTimeout-ijO9WPjY.js";import"./emotion-react.browser.esm-BQ7e9N_g.js";import"./listItemIconClasses-CtCHhvqe.js";import"./Collapse-CMBVb5gg.js";import"./useTheme-CwSUTWIJ.js";import"./Portal-CVCC_lll.js";import"./index-FrVc2Q_M.js";import"./CssBaseline-BPSh959V.js";import"./index-i2kla6Uj.js";import"./extendSxProp-CT-SW93I.js";import"./AppBar-BfAA5r0X.js";import"./createSimplePaletteValueFilter-bm0fmN_7.js";import"./IconButton-CxCxJBhO.js";import"./useId-bmtMxKKl.js";import"./CircularProgress-Bcsy1Pin.js";import"./Tooltip-CQRdrBam.js";import"./index-DKn53RoO.js";import"./useControlled-CIU3udus.js";import"./Grow-Bu5k9bsZ.js";import"./Popper-DhnmPy4J.js";import"./ownerDocument-DW-IO8s5.js";import"./useSlotProps-BwjvMvhT.js";import"./Drawer-BUnkvJCp.js";import"./mergeSlotProps-D_PRovB-.js";import"./debounce-Be36O1Ab.js";import"./ownerWindow-HkKU3E4x.js";import"./Modal-r73ew4B0.js";import"./ListItem-BIq8gZj4.js";import"./isMuiElement-glFYcxXS.js";import"./index-BPJnJB5S.js";import"./useThemeProps-ChzuPIZh.js";import"./useFormControl-bsSDraOa.js";import"./CardContent-B-mRR1qP.js";import"./currencyFormatter-DOmpFJHz.js";import"./numeral-3Q0ULTA-.js";import"./JsBarcode-jjqzL-A9.js";import"./Alert-Cg00dAYx.js";import"./Close-0jcZMw1s.js";import"./Stack-DcJo7WSp.js";import"./createLucideIcon-CMxlCnxM.js";import"./chevron-down-CG2MU_w-.js";import"./Chip-rj_j5-pw.js";import"./KeyboardArrowRight-CSUedYIP.js";import"./SwitchBase-BD-arTUS.js";const E=K("input")({clip:"rect(0 0 0 0)",clipPath:"inset(50%)",height:1,overflow:"hidden",position:"absolute",bottom:0,left:0,whiteSpace:"nowrap",width:1}),Y=[{label:"Arial",fontFamily:"Arial, sans-serif"},{label:"Helvetica",fontFamily:"Helvetica, sans-serif"},{label:"Times New Roman",fontFamily:"'Times New Roman', serif"},{label:"Georgia",fontFamily:"Georgia, serif"},{label:"Courier New",fontFamily:"'Courier New', monospace"},{label:"Verdana",fontFamily:"Verdana, sans-serif"},{label:"Tahoma",fontFamily:"Tahoma, sans-serif"},{label:"Trebuchet MS",fontFamily:"'Trebuchet MS', sans-serif"},{label:"Comic Sans MS",fontFamily:"'Comic Sans MS', cursive"},{label:"OCR A Extended",fontFamily:"'OCR A Extended', monospace"},{label:"Monaco",fontFamily:"Monaco, monospace"},{label:"Lucida Console",fontFamily:"'Lucida Console', monospace"},{label:"Consolas",fontFamily:"Consolas, monospace"},{label:"Bitstream Vera Sans Mono",fontFamily:"'Bitstream Vera Sans Mono', monospace"},{label:"DejaVu Sans Mono",fontFamily:"'DejaVu Sans Mono', monospace"},{label:"Inconsolata",fontFamily:"'Inconsolata', monospace"},{label:"Source Code Pro",fontFamily:"'Source Code Pro', monospace"},{label:"Fira Code",fontFamily:"'Fira Code', monospace"},{label:"Droid Sans Mono",fontFamily:"'Droid Sans Mono', monospace"},{label:"Ubuntu Mono",fontFamily:"'Ubuntu Mono', monospace"},{label:"PT Mono",fontFamily:"'PT Mono', monospace"},{label:"Noto Mono",fontFamily:"'Noto Mono', monospace"},{label:"Hack",fontFamily:"'Hack', monospace"},{label:"Tisa Mono",fontFamily:"'Tisa Mono', monospace"},{label:"Space Mono",fontFamily:"'Space Mono', monospace"}];function d(a){const{children:t,value:c,index:u,...b}=a;return e.jsx("div",{role:"tabpanel",hidden:c!==u,id:`vertical-tabpanel-${u}`,"aria-labelledby":`vertical-tab-${u}`,...b,children:c===u&&e.jsx(_,{sx:{p:3},children:t})})}function Ro({settings:a}){const[t,c]=j.useState(()=>{let o={currency_symbol:"Rs.",currency_code:"LKR",symbol_position:"before",decimal_separator:".",thousands_separator:",",decimal_places:"2",negative_format:"minus",show_currency_code:"no"};if(a.currency_settings)try{const n=JSON.parse(a.currency_settings);o={...o,...n}}catch(n){console.error("Failed to parse currency settings:",n)}return{shop_logo:a.shop_logo,app_icon:a.app_icon,sale_receipt_note:a.sale_receipt_note,shop_name:a.shop_name,sale_print_padding_right:a.sale_print_padding_right,sale_print_padding_left:a.sale_print_padding_left,sale_print_font:a.sale_print_font,show_receipt_shop_name:a.show_receipt_shop_name??1,show_barcode_store:a.show_barcode_store,show_barcode_product_price:a.show_barcode_product_price,show_barcode_product_name:a.show_barcode_product_name,sale_receipt_second_note:a.sale_receipt_second_note,enable_unit_discount:"yes",enable_flat_item_discount:"no",cart_first_focus:"quantity",...o}}),[u,b]=j.useState(()=>{const o=new Map([["container_height","28mm"],["store_font_size","0.8em"],["price_font_size","0.8em"],["price_margin_top","-3px"],["price_margin_bottom","-5px"],["barcode_margin_top","-10px"],["barcode_height",35],["barcode_font_size",14],["barcode_width",1.5],["barcode_format","CODE128"],["product_name_margin_top","-4px"],["product_name_font_size","0.7em"]]);if(a.barcode_settings)try{const n=JSON.parse(a.barcode_settings);Object.entries(n).forEach(([l,s])=>{o.set(l,s)})}catch(n){console.error("Failed to parse barcode settings:",n)}return o}),D=o=>{const{name:n,value:l}=o.target;b(s=>new Map(s).set(n,l))},O=o=>{const n=o.target.value;c({...t,sale_print_font:n})},r=o=>{const{name:n,value:l,type:s,checked:B}=o.target;c({...t,[n]:s==="checkbox"?B?"on":"off":l})},S=o=>{const n=o.target.files[0],{name:l}=o.target;if(n){const s=new FileReader;s.onloadend=()=>{c({...t,[l]:s.result})},s.readAsDataURL(n)}},p=o=>{o.preventDefault();const n=new FormData(o.currentTarget),l=Object.fromEntries(n.entries());if(l.setting_type==="barcode"){const s=Object.fromEntries(u);l.barcodeSettings=JSON.stringify(s)}A.post("/settings-update",l,{headers:{"Content-Type":"multipart/form-data"}}).then(s=>{U.fire({title:"Success!",text:"Successfully saved",icon:"success",showConfirmButton:!1,timer:2e3,timerProgressBar:!0})}).catch(s=>{console.error("Submission failed with errors:",s),console.log(l)})},[m,P]=j.useState("shop"),R=(o,n)=>{P(n)};return e.jsxs(N,{children:[e.jsx(I,{title:"Settings"}),e.jsxs(_,{component:"div",children:[e.jsx(_,{sx:{flexGrow:1,maxWidth:{xs:350,sm:"100%"},bgcolor:"background.paper"},children:e.jsxs($,{value:m,onChange:R,variant:"scrollable",scrollButtons:"auto",children:[e.jsx(h,{label:"SHOP",value:"shop"}),e.jsx(h,{label:"RECEIPT",value:"receipt"}),e.jsx(h,{label:"BARCODE",value:"barcode"}),e.jsx(h,{label:"CURRENCY",value:"currency"}),e.jsx(h,{label:"MISC",value:"misc"}),e.jsx(h,{label:"MODULES",value:"modules"}),e.jsx(h,{label:"MAIL",value:"mail"}),e.jsx(h,{label:"TELEGRAM",value:"telegram"})]})}),e.jsx(d,{value:m,index:"shop",children:e.jsxs("form",{encType:"multipart/form-data",onSubmit:p,method:"post",children:[e.jsx("input",{type:"hidden",name:"setting_type",value:"shop_information"}),e.jsx(_,{sx:{justifyContent:"center",alignItems:"center",width:"100%",display:"flex",flexDirection:"column"},children:e.jsxs(i,{container:!0,width:{xs:"100%",sm:"60%"},children:[e.jsx(g,{sx:{padding:{xs:"0.5rem",sm:"1rem"},marginBottom:"1rem",width:"100%"},children:e.jsxs(i,{size:12,container:!0,spacing:2,children:[e.jsx(i,{size:{xs:12,sm:6},children:e.jsxs(F,{children:[e.jsx(T,{sx:{width:"100%",height:200,contain:"content",padding:"8px",backgroundSize:"contain",backgroundOrigin:"content-box"},image:t.shop_logo,title:"shop logo"}),e.jsx(M,{className:"mt-0",children:e.jsxs(f,{component:"label",role:void 0,variant:"contained",tabIndex:-1,startIcon:e.jsx(w,{}),fullWidth:!0,children:["Upload shop logo",e.jsx(E,{type:"file",onChange:S,name:"shop_logo"})]})})]})}),e.jsx(i,{size:{xs:12,sm:6},children:e.jsxs(F,{children:[e.jsx(T,{sx:{width:"100%",height:200,contain:"content",padding:"8px",backgroundSize:"contain",backgroundOrigin:"content-box"},image:t.app_icon,title:"app icon"}),e.jsx(M,{className:"mt-0",children:e.jsxs(f,{component:"label",role:void 0,variant:"contained",tabIndex:-1,startIcon:e.jsx(w,{}),fullWidth:!0,children:["Upload app icon",e.jsx(E,{type:"file",onChange:S,name:"app_icon"})]})})]})}),e.jsx(i,{size:12,children:e.jsx(x,{fullWidth:!0,variant:"outlined",label:"Shop name",name:"shop_name",multiline:!0,required:!0,sx:{mt:"2rem"},value:t.shop_name,onChange:r})})]})}),e.jsx(i,{size:12,justifyContent:"end",sx:{display:"flex"},children:e.jsx(f,{type:"submit",variant:"outlined",size:"large",color:"success",fullWidth:!0,children:"UPDATE"})})]})})]})}),e.jsx(d,{value:m,index:"receipt",children:e.jsxs("form",{encType:"multipart/form-data",onSubmit:p,method:"post",children:[e.jsx("input",{type:"hidden",name:"setting_type",value:"receipt"}),e.jsx(_,{sx:{justifyContent:"center",alignItems:"center",width:"100%",display:"flex",flexDirection:"column"},children:e.jsxs(i,{container:!0,spacing:2,width:{xs:"100%",sm:"60%"},children:[e.jsx(g,{elevation:3,sx:{padding:3,marginBottom:2},children:e.jsxs(i,{container:!0,sx:{display:"flex",width:"100%"},spacing:2,children:[e.jsx(i,{size:12,children:e.jsx(x,{fullWidth:!0,variant:"outlined",label:"Receipt note",name:"sale_receipt_note",multiline:!0,required:!0,value:t.sale_receipt_note,onChange:r})}),e.jsx(i,{size:12,children:e.jsx(x,{fullWidth:!0,variant:"outlined",label:"Second note",name:"sale_receipt_second_note",multiline:!0,value:t.sale_receipt_second_note,onChange:r})}),e.jsx(i,{size:12,children:e.jsxs(x,{fullWidth:!0,variant:"outlined",label:"Show shopname",name:"show_receipt_shop_name",multiline:!0,required:!0,value:t.show_receipt_shop_name,onChange:r,select:!0,children:[e.jsx(y,{value:1,children:"Show"}),e.jsx(y,{value:0,children:"Hide"})]})}),e.jsx(i,{size:{xs:6,sm:3},children:e.jsx(x,{fullWidth:!0,variant:"outlined",label:"Padding Right",name:"sale_print_padding_right",multiline:!0,required:!0,value:t.sale_print_padding_right,onChange:r})}),e.jsx(i,{size:{xs:6,sm:3},children:e.jsx(x,{fullWidth:!0,variant:"outlined",label:"Padding Left",name:"sale_print_padding_left",multiline:!0,required:!0,value:t.sale_print_padding_left,onChange:r})}),e.jsx(i,{size:{xs:12,sm:6},children:e.jsx(x,{fullWidth:!0,name:"sale_print_font",label:"Choose Font for Receipt",value:t.sale_print_font,onChange:O,select:!0,children:Y.map(o=>e.jsx(y,{value:o.fontFamily,children:e.jsx(z,{style:{fontFamily:o.fontFamily},children:o.label})},o.fontFamily))})})]})}),e.jsx(i,{size:12,justifyContent:"end",sx:{display:"flex"},children:e.jsx(f,{type:"submit",variant:"outlined",size:"large",color:"success",fullWidth:!0,children:"UPDATE"})})]})})]})}),e.jsx(d,{value:m,index:"barcode",children:e.jsx(_,{sx:{justifyContent:"center",alignItems:"center",width:"100%",display:"flex",flexDirection:"column"},children:e.jsxs(i,{container:!0,width:{xs:"100%",sm:"60%"},children:[e.jsxs("form",{encType:"multipart/form-data",onSubmit:p,method:"post",style:{marginBottom:"2rem",width:"100%"},children:[e.jsx("input",{type:"hidden",name:"setting_type",value:"barcode"}),e.jsxs(g,{elevation:3,sx:{padding:2,marginBottom:2},children:[e.jsx(z,{variant:"h6",sx:{mb:2,fontWeight:600},children:"Barcode Display Options"}),e.jsxs(i,{container:!0,spacing:2,sx:{display:"flex",width:"100%"},children:[e.jsx(i,{size:{xs:12,sm:6},children:e.jsx(v,{control:e.jsx(C,{name:"show_barcode_store",value:t.show_barcode_store,onChange:r,checked:t.show_barcode_store==="on"}),label:"STORE NAME"})}),e.jsx(i,{size:{xs:12,sm:6},children:e.jsx(v,{control:e.jsx(C,{name:"show_barcode_product_price",value:t.show_barcode_product_price,onChange:r,checked:t.show_barcode_product_price==="on"}),label:"PRODUCT PRICE"})}),e.jsx(i,{size:{xs:12,sm:6},children:e.jsx(v,{control:e.jsx(C,{name:"show_barcode_product_name",value:t.show_barcode_product_name,onChange:r,checked:t.show_barcode_product_name==="on"}),label:"PRODUCT NAME"})})]}),e.jsx(i,{spacing:2,container:!0,sx:{mt:2},children:[...u.keys()].map(o=>e.jsx(i,{size:{xs:12,sm:6,md:3},children:e.jsx(x,{fullWidth:!0,variant:"outlined",label:o.replace(/_/g," ").replace(/\b\w/g,n=>n.toUpperCase()),name:o,value:u.get(o),onChange:D,size:"small"})},o))}),e.jsx(_,{sx:{display:"flex",justifyContent:"flex-end",gap:2,mt:2},children:e.jsx(f,{type:"submit",variant:"outlined",size:"large",color:"success",children:"UPDATE OPTIONS"})})]})]}),e.jsx(_,{sx:{width:"100%"},children:e.jsx(J,{settings:a})})]})})}),e.jsx(d,{value:m,index:"currency",children:e.jsx(G,{handleSubmit:p,settingFormData:t,handleChange:r})}),e.jsx(d,{value:m,index:"misc",children:e.jsx(W,{handleSubmit:p,settingFormData:t,handleChange:r,setSettingFormData:c,settings:a})}),e.jsx(d,{value:m,index:"modules",children:e.jsx(L,{handleSubmit:p,settingFormData:t,handleChange:r,setSettingFormData:c,settings:a})}),e.jsx(d,{value:m,index:"template",children:e.jsx(k,{})}),e.jsx(d,{value:m,index:"mail",children:e.jsx(H,{handleSubmit:p,settingFormData:t,handleChange:r,setSettingFormData:c,settings:a})}),e.jsx(d,{value:m,index:"telegram",children:e.jsx(V,{handleSubmit:p,settingFormData:t,handleChange:r,setSettingFormData:c,settings:a})}),e.jsx(d,{value:m,index:"loyalty",children:e.jsx(q,{handleSubmit:p,settingFormData:t,handleChange:r,setSettingFormData:c,settings:a})})]})]})}export{Ro as default};
