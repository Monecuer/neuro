import{j as r,r as i,a as k,H as O,L as M}from"./app-J0J4XT7Q.js";import{c as z}from"./createSvgIcon-DH-b1jMs.js";import{H as E}from"./Home-NRzDHtrK.js";import H from"./ProductItem-ON4xIk2s.js";import N from"./CartItem-BClQYt91.js";import G from"./CartSummary-dshCWZIu.js";import L from"./CartFooter-BLNybpR2.js";import F from"./SearchBox-BRwDGecv.js";import $ from"./CartIcon-epige8Qr.js";import{S as A}from"./SalesContext-B1jwJFA9.js";import u from"./CartItemsTop-DgjgqQZc.js";import J from"./POSBottomBar-ClF0rduI.js";import W from"./SaleTemplateItems-GI_825J5.js";import{S as R}from"./sweetalert2.esm.all-5zhdP7Ax.js";import{B as o}from"./Box-m8-AwHvJ.js";import{C as Y}from"./CssBaseline-BPSh959V.js";import{A as q}from"./AppBar-BfAA5r0X.js";import{T as g}from"./Toolbar-Bt5N0HeY.js";import{I as p}from"./IconButton-CxCxJBhO.js";import{T as K}from"./Typography-CWhVrPo-.js";import{G as S}from"./Grid-ByMND7DF.js";import{D as w}from"./Drawer-BUnkvJCp.js";import{s as b}from"./memoTheme-BNdxtxoW.js";import{D as Q}from"./Divider-CCoppV9R.js";import"./app-CxSMgHDY.js";import"./clsx-B-dksMZM.js";import"./product-placeholder-DL4NWfZp.js";import"./currencyFormatter-DOmpFJHz.js";import"./numeral-3Q0ULTA-.js";import"./Card-B0NA572v.js";import"./Paper-CavyNtF_.js";import"./useTheme-CwSUTWIJ.js";import"./CardMedia-DX-RIBFW.js";import"./CardContent-B-mRR1qP.js";import"./index-BPJnJB5S.js";import"./index-i2kla6Uj.js";import"./extendSxProp-CT-SW93I.js";import"./emotion-react.browser.esm-BQ7e9N_g.js";import"./createSimplePaletteValueFilter-bm0fmN_7.js";import"./Delete-NcfILLQ3.js";import"./QuantityInput-ICBD-mNb.js";import"./Add-B7dNfvFo.js";import"./CartItemModal-DNbxAvCb.js";import"./Close-CE33o-VC.js";import"./Visibility-B1KEDVr-.js";import"./Commission-DZY4pu8n.js";import"./TextField-B8xGzqYR.js";import"./useSlot-DIICVg-0.js";import"./useForkRef-npmdbavI.js";import"./useId-bmtMxKKl.js";import"./useFormControl-bsSDraOa.js";import"./TransitionGroupContext-CUmnvxwJ.js";import"./ownerWindow-HkKU3E4x.js";import"./ownerDocument-DW-IO8s5.js";import"./debounce-Be36O1Ab.js";import"./index-DKn53RoO.js";import"./useSlotProps-BwjvMvhT.js";import"./Grow-Bu5k9bsZ.js";import"./Portal-CVCC_lll.js";import"./index-FrVc2Q_M.js";import"./useTimeout-ijO9WPjY.js";import"./mergeSlotProps-D_PRovB-.js";import"./Modal-r73ew4B0.js";import"./List-CA8Dfjeu.js";import"./ListContext-BTargF9Z.js";import"./useControlled-CIU3udus.js";import"./isMuiElement-glFYcxXS.js";import"./InputAdornment-8bA6TaeC.js";import"./useThemeProps-ChzuPIZh.js";import"./DialogContent-BvzB3xZG.js";import"./DialogTitle-2KN-Cgy_.js";import"./Chip-rj_j5-pw.js";import"./ButtonBase-ah7Qb79a.js";import"./Alert-Cg00dAYx.js";import"./Close-0jcZMw1s.js";import"./DialogActions-3_XUqu2a.js";import"./Button-Bhgpz3NQ.js";import"./CircularProgress-Bcsy1Pin.js";import"./ListItem-BIq8gZj4.js";import"./ListItemText-DbBV3q1i.js";import"./listItemTextClasses-BS0z-cUj.js";import"./MenuItem-D4ZeVUNG.js";import"./listItemIconClasses-CtCHhvqe.js";import"./dividerClasses-C03W2_nD.js";import"./ShoppingCart-DEjxtDl6.js";import"./Receipt-CfgyI0Rt.js";import"./HeldItemsModal-D9FMDvoE.js";import"./ListItemButton-ChmwJdM0.js";import"./PaymentsCheckoutDialog-1nAvnRyt.js";import"./Percent-DwVjfmbj.js";import"./Payments-C74n1UUC.js";import"./HighlightOff-C3ZNWjfT.js";import"./index-BOh9Hbob.js";import"./index-B49xHE6m.js";import"./x-DSkJY-jh.js";import"./createLucideIcon-CMxlCnxM.js";import"./TableRow-KnMNmPIP.js";import"./TableCell-CmCRc8xm.js";import"./QuotationDialog-CdFHB2M1.js";import"./CashCheckoutDialog-J1em5JRd.js";import"./SaleTemplateDialog-3JLGKKPy.js";import"./en-gb-DyMZ2GQn.js";import"./index-BCKQ-IUm.js";import"./lodash-DOrSYvRZ.js";import"./Autocomplete-tKHD7bsB.js";import"./usePreviousProps-BagdRM8M.js";import"./Popper-DhnmPy4J.js";import"./Badge-Ce_dt518.js";import"./PersonAdd-GPWK-p0G.js";import"./FormDialog-Cw_mpDmK.js";import"./Tooltip-CQRdrBam.js";import"./Tabs-Cl-X88LN.js";import"./KeyboardArrowRight-CSUedYIP.js";const U=z(r.jsx("path",{d:"M15.41 7.41 14 6l-6 6 6 6 1.41-1.41L10.83 12z"})),s=530,V=b("div")(({theme:t})=>({display:"flex",alignItems:"center",padding:t.spacing(0,1),...t.mixins.toolbar,justifyContent:"flex-end"})),X=b("div")(({theme:t})=>({display:"flex",alignItems:"center",padding:t.spacing(0,1),...t.mixins.toolbar,zIndex:"999"}));function so({products:t,customers:a,return_sale:n,categories:y,edit_sale:l,sale_data:C,default_charges:I}){const e=l?"sale_edit_cart":n?"sales_return_cart":"sales_cart",[c,x]=i.useState(!1),[_,d]=i.useState(!1),[v,D]=i.useState(t),[T,f]=i.useState([]),h=()=>{d(!0),x(!1)},B=()=>{d(!1)},P=()=>{_||x(!c)};i.useEffect(()=>{e==="sales_return_cart"&&localStorage.setItem("sales_return_cart",JSON.stringify([])),e==="sale_edit_cart"&&localStorage.setItem("sale_edit_cart",JSON.stringify([]))},[e]),i.useEffect(()=>{l&&!C.cart_snapshot&&R.fire({title:"Only recent sales can be edited",text:"Please select a recent sale to edit",icon:"error",confirmButtonText:"Go to Sales",showCancelButton:!1,showCloseButton:!1,allowOutsideClick:!1}).then(()=>{k.get("/sales")})});const j=r.jsx(r.Fragment,{children:r.jsxs("form",{action:"/pos",method:"post",className:"p-2 h-[calc(100vh-80px)]",children:[r.jsx(o,{sx:{display:{xs:"none",sm:"block"}},children:r.jsx(u,{customers:a})}),r.jsx(Q,{}),r.jsxs(o,{className:"flex flex-col overflow-auto h-full",children:[r.jsxs(o,{className:"flex-grow",children:[r.jsx(N,{}),r.jsx(G,{})]}),r.jsx(X,{children:r.jsx(L,{})})]})]})});return r.jsxs(A,{cartType:e,defaultCharges:I,children:[r.jsx(O,{title:"Point of Sale"}),r.jsxs(o,{sx:{display:"flex"},children:[r.jsx(Y,{}),r.jsx(q,{position:"fixed",sx:{width:{sm:`calc(100% - ${s}px)`},mr:{sm:`${s}px`}},children:r.jsxs(g,{sx:{paddingY:"10px"},children:[r.jsx(p,{color:"inherit","aria-label":"open drawer",edge:"start",onClick:P,sx:{mr:0,display:{sm:"none"}},children:r.jsx($,{})}),r.jsx(o,{sx:{display:{xs:"none",sm:"flex"}},children:r.jsx(K,{variant:"h4",noWrap:!0,component:"div",children:"POS"})}),r.jsx(F,{}),r.jsx(M,{href:"/dashboard",children:r.jsx(p,{color:"inherit",sx:{ml:0,p:"10px",color:"default","& .MuiSvgIcon-root":{fontSize:30}},type:"button",children:r.jsx(E,{})})})]})}),r.jsxs(o,{component:"main",sx:{flexGrow:1,p:3,width:{sm:`calc(100% - ${s}px)`}},children:[r.jsx(g,{}),r.jsxs(S,{container:!0,spacing:1,sx:{mb:8},children:[r.jsx(W,{templates:T,setTemplates:f}),v?.map(m=>r.jsx(S,{size:{xs:6,sm:6,md:2},sx:{cursor:"pointer"},children:r.jsx(H,{product:m})},m.id+m.batch_number)),!n&&r.jsx(J,{drawerWidth:s,categories:y,setProducts:D,setTemplates:f})]})]}),r.jsxs(o,{component:"nav",sx:{width:{sm:s},flexShrink:{sm:0}},children:[r.jsxs(w,{variant:"temporary",open:c,onTransitionEnd:B,onClose:h,ModalProps:{keepMounted:!0},sx:{display:{xs:"block",sm:"none"},"& .MuiDrawer-paper":{boxSizing:"border-box",width:"100%"}},anchor:"right",children:[r.jsxs(V,{children:[r.jsx(u,{customers:a}),r.jsx(p,{onClick:h,children:r.jsx(U,{})})]}),j]}),r.jsx(w,{variant:"permanent",sx:{display:{xs:"none",sm:"block"},"& .MuiDrawer-paper":{boxSizing:"border-box",width:s}},open:!0,anchor:"right",children:j})]})]})]})}export{so as default};
