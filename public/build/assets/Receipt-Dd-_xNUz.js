import{j as u,m as ce,c as le,r as kt,H as de,d as It,R as ue}from"./app-J0J4XT7Q.js";import{P as fe}from"./Print-CRehaXOr.js";import{c as Jt}from"./createSvgIcon-DH-b1jMs.js";import"./numeral-3Q0ULTA-.js";import he from"./Barcode-gk587ter.js";import{u as me}from"./currencyFormatter-DOmpFJHz.js";import{s as Ot}from"./memoTheme-BNdxtxoW.js";import{P as Wt}from"./Paper-CavyNtF_.js";import{B as ft}from"./Box-m8-AwHvJ.js";import{T as B}from"./Typography-CWhVrPo-.js";import{B as Bt}from"./Button-Bhgpz3NQ.js";import{I as Ut}from"./IconButton-CxCxJBhO.js";import{D as pe}from"./download-BFEK6qwT.js";import{C as ge}from"./Card-B0NA572v.js";import{C as ye}from"./CardMedia-DX-RIBFW.js";import{D as gt}from"./Divider-CCoppV9R.js";import{T as be}from"./TableContainer-BQBwiHL3.js";import{T as we,a as Z,b as xe}from"./TableRow-KnMNmPIP.js";import{T as Se}from"./TableHead-khwUWmBh.js";import{T as q}from"./TableCell-CmCRc8xm.js";import"./app-CxSMgHDY.js";import"./clsx-B-dksMZM.js";import"./JsBarcode-jjqzL-A9.js";import"./index-BPJnJB5S.js";import"./useTheme-CwSUTWIJ.js";import"./extendSxProp-CT-SW93I.js";import"./index-i2kla6Uj.js";import"./emotion-react.browser.esm-BQ7e9N_g.js";import"./createSimplePaletteValueFilter-bm0fmN_7.js";import"./useId-bmtMxKKl.js";import"./ButtonBase-ah7Qb79a.js";import"./useTimeout-ijO9WPjY.js";import"./TransitionGroupContext-CUmnvxwJ.js";import"./useForkRef-npmdbavI.js";import"./CircularProgress-Bcsy1Pin.js";import"./createLucideIcon-CMxlCnxM.js";import"./dividerClasses-C03W2_nD.js";const ve=Jt(u.jsx("path",{d:"M11.67 3.87 9.9 2.1 0 12l9.9 9.9 1.77-1.77L3.54 12z"})),Ce=Jt(u.jsx("path",{d:"M16.75 13.96c.25.13.41.2.46.3.06.11.04.61-.21 1.18-.2.56-1.24 1.1-1.7 1.12-.46.02-.47.36-2.96-.73-2.49-1.09-3.99-3.75-4.11-3.92-.12-.17-.96-1.38-.92-2.61.05-1.22.69-1.8.95-2.04.24-.26.51-.29.68-.26h.47c.15 0 .36-.06.55.45l.69 1.87c.06.13.1.28.01.44l-.27.41-.39.42c-.12.12-.26.25-.12.5.12.26.62 1.09 1.32 1.78.91.88 1.71 1.17 1.95 1.3.24.14.39.12.54-.04l.81-.94c.19-.25.35-.19.58-.11l1.67.88M12 2a10 10 0 0 1 10 10 10 10 0 0 1-10 10c-1.97 0-3.8-.57-5.35-1.55L2 22l1.55-4.65A9.969 9.969 0 0 1 2 12 10 10 0 0 1 12 2m0 2a8 8 0 0 0-8 8c0 1.72.54 3.31 1.46 4.61L4.5 19.5l2.89-.96A7.95 7.95 0 0 0 12 20a8 8 0 0 0 8-8 8 8 0 0 0-8-8z"}));var wt={exports:{}},ke=wt.exports,Dt;function Ae(){return Dt||(Dt=1,function(t,e){(function(n,r){t.exports=r(ce())})(typeof self<"u"?self:ke,function(n){return function(){var r={155:function(d){d.exports=n}},o={};function i(d){var m=o[d];if(m!==void 0)return m.exports;var y=o[d]={exports:{}};return r[d](y,y.exports,i),y.exports}i.d=function(d,m){for(var y in m)i.o(m,y)&&!i.o(d,y)&&Object.defineProperty(d,y,{enumerable:!0,get:m[y]})},i.o=function(d,m){return Object.prototype.hasOwnProperty.call(d,m)},i.r=function(d){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(d,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(d,"__esModule",{value:!0})};var s={};i.r(s),i.d(s,{useReactToPrint:function(){return h}});var a=i(155);function f({level:d="error",messages:m,suppressErrors:y=!1}){y||(d==="error"?console.error(m):d==="warning"?console.warn(m):console.debug(m))}function l(d,m){if(m||!d){const y=document.getElementById("printWindow");y&&document.body.removeChild(y)}}function c(d){return d instanceof Error?d:new Error("Unknown Error")}function g(d,m){const{documentTitle:y,onAfterPrint:x,onPrintError:k,preserveAfterPrint:F,print:W,suppressErrors:p}=m;setTimeout(()=>{var b,S;if(d.contentWindow){let E=function(){x?.(),l(F)};if(d.contentWindow.focus(),W)W(d).then(E).catch(w=>{k?k("print",c(w)):f({messages:["An error was thrown by the specified `print` function"],suppressErrors:p})});else{if(d.contentWindow.print){const w=(S=(b=d.contentDocument)===null||b===void 0?void 0:b.title)!==null&&S!==void 0?S:"",v=d.ownerDocument.title;y&&(d.ownerDocument.title=y,d.contentDocument&&(d.contentDocument.title=y)),d.contentWindow.print(),y&&(d.ownerDocument.title=v,d.contentDocument&&(d.contentDocument.title=w))}else f({messages:["Printing for this browser is not currently possible: the browser does not have a `print` method available for iframes."],suppressErrors:p});[/Android/i,/webOS/i,/iPhone/i,/iPad/i,/iPod/i,/BlackBerry/i,/Windows Phone/i].some(w=>{var v,N;return((N=(v=navigator.userAgent)!==null&&v!==void 0?v:navigator.vendor)!==null&&N!==void 0?N:"opera"in window&&window.opera).match(w)})?setTimeout(E,500):E()}}else f({messages:["Printing failed because the `contentWindow` of the print iframe did not load. This is possibly an error with `react-to-print`. Please file an issue: https://github.com/MatthewHerbst/react-to-print/issues/"],suppressErrors:p})},500)}function T(d){const m=[],y=document.createTreeWalker(d,NodeFilter.SHOW_ELEMENT,null);let x=y.nextNode();for(;x;)m.push(x),x=y.nextNode();return m}function O(d,m,y){const x=T(d),k=T(m);if(x.length===k.length)for(let F=0;F<x.length;F++){const W=x[F],p=k[F],b=W.shadowRoot;if(b!==null){const S=p.attachShadow({mode:b.mode});S.innerHTML=b.innerHTML,O(b,S,y)}}else f({messages:["When cloning shadow root content, source and target elements have different size. `onBeforePrint` likely resolved too early.",d,m],suppressErrors:y})}const $=`
    @page {
        /* Remove browser default header (title) and footer (url) */
        margin: 0;
    }
    @media print {
        body {
            /* Tell browsers to print background colors */
            color-adjust: exact; /* Firefox. This is an older version of "print-color-adjust" */
            print-color-adjust: exact; /* Firefox/Safari */
            -webkit-print-color-adjust: exact; /* Chrome/Safari/Edge/Opera */
        }
    }
`;function A(d,m,y,x){var k,F,W,p,b;const{contentNode:S,clonedContentNode:E,clonedImgNodes:w,clonedVideoNodes:v,numResourcesToLoad:N,originalCanvasNodes:j}=y,{bodyClass:P,fonts:L,ignoreGlobalStyles:H,pageStyle:V,nonce:R,suppressErrors:_,copyShadowRoots:z}=x;d.onload=null;const M=(k=d.contentDocument)!==null&&k!==void 0?k:(F=d.contentWindow)===null||F===void 0?void 0:F.document;if(M){const X=M.body.appendChild(E);z&&O(S,X,!!_),L&&(!((W=d.contentDocument)===null||W===void 0)&&W.fonts&&(!((p=d.contentWindow)===null||p===void 0)&&p.FontFace)?L.forEach(U=>{const I=new FontFace(U.family,U.source,{weight:U.weight,style:U.style});d.contentDocument.fonts.add(I),I.loaded.then(()=>{m(I)}).catch(J=>{m(I,["Failed loading the font:",I,"Load error:",c(J)])})}):(L.forEach(U=>{m(U)}),f({messages:['"react-to-print" is not able to load custom fonts because the browser does not support the FontFace API but will continue attempting to print the page'],suppressErrors:_})));const Q=V??$,tt=M.createElement("style");R&&(tt.setAttribute("nonce",R),M.head.setAttribute("nonce",R)),tt.appendChild(M.createTextNode(Q)),M.head.appendChild(tt),P&&M.body.classList.add(...P.split(" "));const G=M.querySelectorAll("canvas");for(let U=0;U<j.length;++U){const I=j[U],J=G[U];if(J===void 0){f({messages:["A canvas element could not be copied for printing, has it loaded? `onBeforePrint` likely resolved too early.",I],suppressErrors:_});continue}const D=J.getContext("2d");D&&D.drawImage(I,0,0)}for(let U=0;U<w.length;U++){const I=w[U],J=I.getAttribute("src");if(J){const D=new Image;D.onload=()=>{m(I)},D.onerror=(K,et,it,nt,ot)=>{m(I,["Error loading <img>",I,"Error",ot])},D.src=J}else m(I,['Found an <img> tag with an empty "src" attribute. This prevents pre-loading it.',I])}for(let U=0;U<v.length;U++){const I=v[U];I.preload="auto";const J=I.getAttribute("poster");if(J){const D=new Image;D.onload=()=>{m(I)},D.onerror=(K,et,it,nt,ot)=>{m(I,["Error loading video poster",J,"for video",I,"Error:",ot])},D.src=J}else I.readyState>=2?m(I):I.src?(I.onloadeddata=()=>{m(I)},I.onerror=(D,K,et,it,nt)=>{m(I,["Error loading video",I,"Error",nt])},I.onstalled=()=>{m(I,["Loading video stalled, skipping",I])}):m(I,["Error loading video, `src` is empty",I])}const rt="select",lt=S.querySelectorAll(rt),ct=M.querySelectorAll(rt);for(let U=0;U<lt.length;U++)ct[U].value=lt[U].value;if(!H){const U=document.querySelectorAll("style, link[rel~='stylesheet'], link[as='style']");for(let I=0,J=U.length;I<J;++I){const D=U[I];if(D.tagName.toLowerCase()==="style"){const K=M.createElement(D.tagName),et=D.sheet;if(et){let it="";try{const nt=et.cssRules.length;for(let ot=0;ot<nt;++ot)typeof et.cssRules[ot].cssText=="string"&&(it+=`${et.cssRules[ot].cssText}\r
`)}catch(nt){f({messages:["A stylesheet could not be accessed. This is likely due to the stylesheet having cross-origin imports, and many browsers block script access to cross-origin stylesheets. See https://github.com/MatthewHerbst/react-to-print/issues/429 for details. You may be able to load the sheet by both marking the stylesheet with the cross `crossorigin` attribute, and setting the `Access-Control-Allow-Origin` header on the server serving the stylesheet. Alternatively, host the stylesheet on your domain to avoid this issue entirely.",D,`Original error: ${c(nt).message}`],level:"warning"})}K.setAttribute("id",`react-to-print-${I}`),R&&K.setAttribute("nonce",R),K.appendChild(M.createTextNode(it)),M.head.appendChild(K)}}else if(D.getAttribute("href"))if(D.hasAttribute("disabled"))f({messages:["`react-to-print` encountered a <link> tag with a `disabled` attribute and will ignore it. Note that the `disabled` attribute is deprecated, and some browsers ignore it. You should stop using it. https://developer.mozilla.org/en-US/docs/Web/HTML/Element/link#attr-disabled. The <link> is:",D],level:"warning"}),m(D);else{const K=M.createElement(D.tagName);for(let et=0,it=D.attributes.length;et<it;++et){const nt=D.attributes[et];nt&&K.setAttribute(nt.nodeName,(b=nt.nodeValue)!==null&&b!==void 0?b:"")}K.onload=()=>{m(K)},K.onerror=(et,it,nt,ot,ie)=>{m(K,["Failed to load",K,"Error:",ie])},R&&K.setAttribute("nonce",R),M.head.appendChild(K)}else f({messages:["`react-to-print` encountered a <link> tag with an empty `href` attribute. In addition to being invalid HTML, this can cause problems in many browsers, and so the <link> was not loaded. The <link> is:",D],level:"warning"}),m(D)}}}N===0&&g(d,x)}function h({bodyClass:d,contentRef:m,copyShadowRoots:y,documentTitle:x,fonts:k,ignoreGlobalStyles:F,nonce:W,onAfterPrint:p,onBeforePrint:b,onPrintError:S,pageStyle:E,preserveAfterPrint:w,print:v,suppressErrors:N}){return(0,a.useCallback)(j=>{function P(){const L={bodyClass:d,contentRef:m,copyShadowRoots:y,documentTitle:x,fonts:k,ignoreGlobalStyles:F,nonce:W,onAfterPrint:p,onPrintError:S,pageStyle:E,preserveAfterPrint:w,print:v,suppressErrors:N},H=function(){const _=document.createElement("iframe");return _.width=`${document.documentElement.clientWidth}px`,_.height=`${document.documentElement.clientHeight}px`,_.style.position="absolute",_.style.top=`-${document.documentElement.clientHeight+100}px`,_.style.left=`-${document.documentElement.clientWidth+100}px`,_.id="printWindow",_.srcdoc="<!DOCTYPE html>",_}(),V=function(_,z){const{contentRef:M,fonts:X,ignoreGlobalStyles:Q,suppressErrors:tt}=z,G=function({contentRef:J,optionalContent:D,suppressErrors:K}){return D&&typeof D=="function"?(J&&f({level:"warning",messages:['"react-to-print" received a `contentRef` option and an optional-content param passed to its callback. The `contentRef` option will be ignored.']}),D()):J?J.current:void f({messages:['"react-to-print" did not receive a `contentRef` option or a optional-content param pass to its callback.'],suppressErrors:K})}({contentRef:M,optionalContent:_,suppressErrors:tt});if(!G)return;const rt=G.cloneNode(!0),lt=document.querySelectorAll("link[rel~='stylesheet'], link[as='style']"),ct=rt.querySelectorAll("img"),U=rt.querySelectorAll("video"),I=X?X.length:0;return{contentNode:G,clonedContentNode:rt,clonedImgNodes:ct,clonedVideoNodes:U,numResourcesToLoad:(Q?0:lt.length)+ct.length+U.length+I,originalCanvasNodes:G.querySelectorAll("canvas")}}(j,L);if(!V)return void f({messages:["There is nothing to print"],suppressErrors:N});const R=function(_,z,M){const{suppressErrors:X}=_,Q=[],tt=[];return function(G,rt){Q.includes(G)?f({level:"debug",messages:["Tried to mark a resource that has already been handled",G],suppressErrors:X}):(rt?(f({messages:['"react-to-print" was unable to load a resource but will continue attempting to print the page',...rt],suppressErrors:X}),tt.push(G)):Q.push(G),Q.length+tt.length===z&&g(M,_))}}(L,V.numResourcesToLoad,H);(function(_,z,M,X){_.onload=()=>{A(_,z,M,X)},document.body.appendChild(_)})(H,R,V,L)}l(w,!0),b?b().then(()=>{P()}).catch(L=>{S?.("onBeforePrint",c(L))}):P()},[d,m,y,x,k,F,W,p,b,S,E,w,v,N])}return s}()})}(wt)),wt.exports}var Ee=Ae(),C={image:new Map,background:new Map,resource:new Map,defaultStyle:new Map,baseStyle:new Map,computedStyle:new WeakMap,font:new Set,session:{styleMap:new Map,styleCache:new WeakMap,nodeMap:new Map}};function Te(t="soft"){switch(t){case"auto":{C.session.styleMap=new Map,C.session.nodeMap=new Map;return}case"soft":{C.session.styleMap=new Map,C.session.nodeMap=new Map,C.session.styleCache=new WeakMap;return}case"full":return;case"disabled":{C.session.styleMap=new Map,C.session.nodeMap=new Map,C.session.styleCache=new WeakMap,C.computedStyle=new WeakMap,C.baseStyle=new Map,C.defaultStyle=new Map,C.image=new Map,C.background=new Map,C.resource=new Map,C.font=new Set;return}default:{C.session.styleMap=new Map,C.session.nodeMap=new Map,C.session.styleCache=new WeakMap;return}}}function Ft(t){const e=t.match(/url\((['"]?)(.*?)(\1)\)/);if(!e)return null;const n=e[2].trim();return n.startsWith("#")?null:n}function je(t){if(!t||t==="none")return"";let e=t.replace(/translate[XY]?\([^)]*\)/g,"");return e=e.replace(/matrix\(([^)]+)\)/g,(n,r)=>{const o=r.split(",").map(i=>i.trim());return o.length!==6?`matrix(${r})`:(o[4]="0",o[5]="0",`matrix(${o.join(", ")})`)}),e=e.replace(/matrix3d\(([^)]+)\)/g,(n,r)=>{const o=r.split(",").map(i=>i.trim());return o.length!==16?`matrix3d(${r})`:(o[12]="0",o[13]="0",`matrix3d(${o.join(", ")})`)}),e.trim().replace(/\s{2,}/g," ")}function Qt(t){if(/%[0-9A-Fa-f]{2}/.test(t))return t;try{return encodeURI(t)}catch{return t}}function $e(t="[snapDOM]",{ttlMs:e=5*6e4,maxEntries:n=12}={}){const r=new Map;let o=0;function i(s,a,f){if(o>=n)return;const l=Date.now();(r.get(a)||0)>l||(r.set(a,l+e),o++,s==="warn"&&console&&console.warn?console.warn(`${t} ${f}`):console&&console.error&&console.error(`${t} ${f}`))}return{warnOnce(s,a){i("warn",s,a)},errorOnce(s,a){i("error",s,a)},reset(){r.clear(),o=0}}}var qt=$e("[snapDOM]",{ttlMs:3*6e4,maxEntries:10}),At=new Map,yt=new Map;function Me(t){return/^data:|^blob:|^about:blank$/.test(t)}function Ne(t,e){if(!e||Me(t))return!1;try{const n=typeof location<"u"&&location.href?location.href:"http://localhost/",r=new URL(t,n);return typeof location<"u"?r.origin!==location.origin:!0}catch{return!!e}}function Re(t,e){if(!e)return t;if(e.includes("{url}"))return e.replace("{url}",encodeURIComponent(t));const n=e.endsWith("?")?"":e.includes("?")?"&":"?";return`${e}${n}url=${encodeURIComponent(t)}`}function _e(t){return new Promise((e,n)=>{const r=new FileReader;r.onload=()=>e(String(r.result||"")),r.onerror=()=>n(new Error("read_failed")),r.readAsDataURL(t)})}function Fe(t,e){return[e.as||"blob",e.timeout??3e3,e.useProxy||"",e.errorTTL??8e3,t].join("|")}async function at(t,e={}){const n=e.as??"blob",r=e.timeout??3e3,o=e.useProxy||"",i=e.errorTTL??8e3,s=e.headers||{},a=!!e.silent,f=Fe(t,{as:n,timeout:r,useProxy:o,errorTTL:i}),l=yt.get(f);if(l&&l.until>Date.now())return{...l.result,fromCache:!0};l&&yt.delete(f);const c=At.get(f);if(c)return c;const g=Ne(t,o)?Re(t,o):t;let T=e.credentials;if(!T)try{const h=typeof location<"u"&&location.href?location.href:"http://localhost/",d=new URL(t,h);T=typeof location<"u"&&d.origin===location.origin?"include":"omit"}catch{T="omit"}const O=new AbortController,$=setTimeout(()=>O.abort("timeout"),r),A=(async()=>{try{const h=await fetch(g,{signal:O.signal,credentials:T,headers:s});if(!h.ok){const y={ok:!1,data:null,status:h.status,url:g,fromCache:!1,reason:"http_error"};if(yt.set(f,{until:Date.now()+i,result:y}),!a){const x=`${h.status} ${h.statusText||""}`.trim();qt.warnOnce(`http:${h.status}:${n}:${new URL(t,location?.href??"http://localhost/").origin}`,`HTTP error ${x} while fetching ${n} ${t}`)}return e.onError&&e.onError(y),y}if(n==="text")return{ok:!0,data:await h.text(),status:h.status,url:g,fromCache:!1};const d=await h.blob(),m=d.type||h.headers.get("content-type")||"";return n==="dataURL"?{ok:!0,data:await _e(d),status:h.status,url:g,fromCache:!1,mime:m}:{ok:!0,data:d,status:h.status,url:g,fromCache:!1,mime:m}}catch(h){const d=h&&typeof h=="object"&&"name"in h&&h.name==="AbortError"?String(h.message||"").includes("timeout")?"timeout":"abort":"network",m={ok:!1,data:null,status:0,url:g,fromCache:!1,reason:d};if(yt.set(f,{until:Date.now()+i,result:m}),!a){const y=`${d}:${n}:${new URL(t,location?.href??"http://localhost/").origin}`,x=d==="timeout"?`Timeout after ${r}ms. Consider increasing timeout or using a proxy for ${t}`:d==="abort"?`Request aborted while fetching ${n} ${t}`:`Network/CORS issue while fetching ${n} ${t}. A proxy may be required`;qt.errorOnce(y,x)}return e.onError&&e.onError(m),m}finally{clearTimeout($),At.delete(f)}})();return At.set(f,A),A}function Lt(t,e){if(!e||!t.width||!t.height)return t;const n=document.createElement("canvas");n.width=t.width,n.height=t.height;const r=n.getContext("2d");return r.fillStyle=e,r.fillRect(0,0,n.width,n.height),r.drawImage(t,0,0),n}async function Zt(t,e={}){if(/^((repeating-)?(linear|radial|conic)-gradient)\(/i.test(t)||t.trim()==="none")return t;const r=Ft(t);if(!r)return t;const o=Qt(r);if(C.background.has(o)){const i=C.background.get(o);return i?`url("${i}")`:"none"}try{const i=await at(o,{as:"dataURL",useProxy:e.useProxy});return i.ok?(C.background.set(o,i.data),`url("${i.data}")`):(C.background.set(o,null),"none")}catch{return C.background.set(o,null),"none"}}var Le=new Set(["meta","script","noscript","title","link","template"]),Pt=new Set(["meta","link","style","title","noscript","script","template","g","defs","use","marker","mask","clipPath","pattern","path","polygon","polyline","line","circle","ellipse","rect","filter","lineargradient","radialgradient","stop"]);function Pe(t){if(t=String(t).toLowerCase(),Pt.has(t)){const i={};return C.defaultStyle.set(t,i),i}if(C.defaultStyle.has(t))return C.defaultStyle.get(t);let e=document.getElementById("snapdom-sandbox");e||(e=document.createElement("div"),e.id="snapdom-sandbox",e.setAttribute("data-snapdom-sandbox","true"),e.setAttribute("aria-hidden","true"),e.style.position="absolute",e.style.left="-9999px",e.style.top="-9999px",e.style.width="0px",e.style.height="0px",e.style.overflow="hidden",document.body.appendChild(e));const n=document.createElement(t);n.style.all="initial",e.appendChild(n);const r=getComputedStyle(n),o={};for(let i of r){if(te(i))continue;const s=r.getPropertyValue(i);o[i]=s}return e.removeChild(n),C.defaultStyle.set(t,o),o}var Ie=/(?:^|-)(animation|transition)(?:-|$)/i,Oe=/^(--|view-timeline|scroll-timeline|animation-trigger|offset-|position-try|app-region|interactivity|overlay|view-transition|-webkit-locale|-webkit-user-(?:drag|modify)|-webkit-tap-highlight-color|-webkit-text-security)$/i,We=new Set(["cursor","pointer-events","touch-action","user-select","print-color-adjust","speak","reading-flow","reading-order","anchor-name","anchor-scope","container-name","container-type","timeline-scope"]);function te(t){const e=String(t).toLowerCase();return!!(We.has(e)||Oe.test(e)||Ie.test(e))}function $t(t,e){if(e=String(e||"").toLowerCase(),Pt.has(e))return"";const n=[],r=Pe(e);for(let[o,i]of Object.entries(t)){if(te(o))continue;const s=r[o];i&&i!==s&&n.push(`${o}:${i}`)}return n.sort(),n.join(";")}function Be(t){const e=new Set;return t.nodeType!==Node.ELEMENT_NODE&&t.nodeType!==Node.DOCUMENT_FRAGMENT_NODE?[]:(t.tagName&&e.add(t.tagName.toLowerCase()),typeof t.querySelectorAll=="function"&&t.querySelectorAll("*").forEach(n=>e.add(n.tagName.toLowerCase())),Array.from(e))}function Ue(t){const e=new Map;for(let r of t){const o=C.defaultStyle.get(r);if(!o)continue;const i=Object.entries(o).map(([s,a])=>`${s}:${a};`).sort().join("");i&&(e.has(i)||e.set(i,[]),e.get(i).push(r))}let n="";for(let[r,o]of e.entries())n+=`${o.join(",")} { ${r} }
`;return n}function De(t){const e=Array.from(new Set(t.values())).filter(Boolean).sort(),n=new Map;let r=1;for(const o of e)n.set(o,`c${r++}`);return n}function ee(t,e=null){if(!(t instanceof Element))return window.getComputedStyle(t,e);let n=C.computedStyle.get(t);if(n||(n=new Map,C.computedStyle.set(t,n)),!n.has(e)){const r=window.getComputedStyle(t,e);n.set(e,r)}return n.get(e)}function qe(t){let e=t.replace(/^['"]|['"]$/g,"");if(e.startsWith("\\"))try{return String.fromCharCode(parseInt(e.replace("\\",""),16))}catch{return e}return e}function Ht(t){const e={};for(let n of t)e[n]=t.getPropertyValue(n);return e}function ne(t){const e=[];let n=0,r=0;for(let o=0;o<t.length;o++){const i=t[o];i==="("&&n++,i===")"&&n--,i===","&&n===0&&(e.push(t.slice(r,o).trim()),r=o+1)}return e.push(t.slice(r).trim()),e}function dt(t,{fast:e=!1}={}){if(e)return t();"requestIdleCallback"in window?requestIdleCallback(t,{timeout:50}):setTimeout(t,1)}function re(){return/^((?!chrome|android).)*safari/i.test(navigator.userAgent)}var zt=new WeakMap,Mt=new Map,Nt=0;function mt(){Nt++}var Vt=!1;function He(t=document.documentElement){if(!Vt){Vt=!0;try{new MutationObserver(()=>mt()).observe(t,{subtree:!0,childList:!0,characterData:!0,attributes:!0})}catch{}try{new MutationObserver(()=>mt()).observe(document.head,{subtree:!0,childList:!0,characterData:!0,attributes:!0})}catch{}try{const e=document.fonts;e&&(e.addEventListener?.("loadingdone",mt),e.ready?.then(()=>mt()).catch(()=>{}))}catch{}}}function ze(t){const e={},n=t.getPropertyValue("visibility");for(let r=0;r<t.length;r++){const o=t[r];let i=t.getPropertyValue(o);(o==="background-image"||o==="content")&&i.includes("url(")&&!i.includes("data:")&&(i="none"),e[o]=i}return n==="hidden"&&(e.opacity="0"),e}var Yt=new WeakMap;function Ve(t){let e=Yt.get(t);return e||(e=Object.entries(t).sort((r,o)=>r[0]<o[0]?-1:r[0]>o[0]?1:0).map(([r,o])=>`${r}:${o}`).join(";"),Yt.set(t,e),e)}function Ye(t,e=null){const n=zt.get(t);if(n&&n.epoch===Nt)return n.snapshot;const r=e||getComputedStyle(t),o=ze(r);return zt.set(t,{epoch:Nt,snapshot:o}),o}function Xe(t,e){return t&&t.session&&t.persist?t:t&&(t.styleMap||t.styleCache||t.nodeMap)?{session:t,persist:{snapshotKeyCache:Mt,defaultStyle:C.defaultStyle,baseStyle:C.baseStyle,image:C.image,resource:C.resource,background:C.background,font:C.font},options:e||{}}:{session:C.session,persist:{snapshotKeyCache:Mt,defaultStyle:C.defaultStyle,baseStyle:C.baseStyle,image:C.image,resource:C.resource,background:C.background,font:C.font},options:t||e||{}}}async function ut(t,e,n,r){if(t.tagName==="STYLE")return;const o=Xe(n,r),i=o.options&&o.options.cache||"auto";if(i!=="disabled"&&He(document.documentElement),i==="disabled"&&!o.session.__bumpedForDisabled&&(mt(),Mt.clear(),o.session.__bumpedForDisabled=!0),Pt.has(t.tagName?.toLowerCase())){const T=t.getAttribute?.("style");T&&e.setAttribute("style",T)}const{session:s,persist:a}=o;s.styleCache.has(t)||s.styleCache.set(t,getComputedStyle(t));const f=s.styleCache.get(t),l=Ye(t,f),c=Ve(l);let g=a.snapshotKeyCache.get(c);if(!g){const T=t.tagName?.toLowerCase()||"div";g=$t(l,T),a.snapshotKeyCache.set(c,g)}s.styleMap.set(e,g)}function Et(t,e,n){return Promise.all(t.map(r=>new Promise(o=>{function i(){dt(s=>{(s&&typeof s.timeRemaining=="function"?s.timeRemaining()>0:!0)?e(r,o):i()},{fast:n})}i()})))}function Ge(t){return t=t.trim(),!t||/\:not\(\s*\[data-sd-slotted\]\s*\)\s*$/.test(t)?t:`${t}:not([data-sd-slotted])`}function Ke(t,e,n=!0){return t.split(",").map(r=>r.trim()).filter(Boolean).map(r=>{if(r.startsWith(":where(")||r.startsWith("@"))return r;const o=n?Ge(r):r;return`:where(${e} ${o})`}).join(", ")}function Je(t,e){return t?(t=t.replace(/:host\(([^)]+)\)/g,(n,r)=>`:where(${e}:is(${r.trim()}))`),t=t.replace(/:host\b/g,`:where(${e})`),t=t.replace(/:host-context\(([^)]+)\)/g,(n,r)=>`:where(:where(${r.trim()}) ${e})`),t=t.replace(/::slotted\(([^)]+)\)/g,(n,r)=>`:where(${e} ${r.trim()})`),t=t.replace(/(^|})(\s*)([^@}{]+){/g,(n,r,o,i)=>{const s=Ke(i,e,!0);return`${r}${o}${s}{`}),t):""}function Qe(t){return t.shadowScopeSeq=(t.shadowScopeSeq||0)+1,`s${t.shadowScopeSeq}`}function Ze(t){let e="";try{t.querySelectorAll("style").forEach(r=>{e+=(r.textContent||"")+`
`});const n=t.adoptedStyleSheets||[];for(const r of n)try{if(r&&r.cssRules)for(const o of r.cssRules)e+=o.cssText+`
`}catch{}}catch{}return e}function tn(t,e,n){if(!e)return;const r=document.createElement("style");r.setAttribute("data-sd",n),r.textContent=e,t.insertBefore(r,t.firstChild||null)}function en(t,e){try{const n=t.currentSrc||t.src||"";if(!n)return;e.setAttribute("src",n),e.removeAttribute("srcset"),e.removeAttribute("sizes"),e.loading="eager",e.decoding="sync"}catch{}}function nn(t){const e=new Set;if(!t)return e;const n=/var\(\s*(--[A-Za-z0-9_-]+)\b/g;let r;for(;r=n.exec(t);)e.add(r[1]);return e}function rn(t,e){try{let r=getComputedStyle(t).getPropertyValue(e).trim();if(r)return r}catch{}try{let r=getComputedStyle(document.documentElement).getPropertyValue(e).trim();if(r)return r}catch{}return""}function on(t,e,n){const r=[];for(const o of e){const i=rn(t,o);i&&r.push(`${o}: ${i};`)}return r.length?`${n}{${r.join("")}}
`:""}function sn(t){t&&(t.nodeType===Node.ELEMENT_NODE&&t.setAttribute("data-sd-slotted",""),t.querySelectorAll&&t.querySelectorAll("*").forEach(e=>e.setAttribute("data-sd-slotted","")))}async function an(t,e=3){const n=()=>{try{return t.contentDocument||t.contentWindow?.document||null}catch{return null}};let r=n(),o=0;for(;o<e&&(!r||!r.body&&!r.documentElement);)await new Promise(i=>setTimeout(i,0)),r=n(),o++;return r&&(r.body||r.documentElement)?r:null}function cn(t){const e=t.getBoundingClientRect();let n=0,r=0,o=0,i=0;try{const f=getComputedStyle(t);n=parseFloat(f.borderLeftWidth)||0,r=parseFloat(f.borderRightWidth)||0,o=parseFloat(f.borderTopWidth)||0,i=parseFloat(f.borderBottomWidth)||0}catch{}const s=Math.max(0,Math.round(e.width-(n+r))),a=Math.max(0,Math.round(e.height-(o+i)));return{contentWidth:s,contentHeight:a,rect:e}}function ln(t,e,n){const r=t.createElement("style");return r.setAttribute("data-sd-iframe-pin",""),r.textContent=`html, body {margin: 0 !important;padding: 0 !important;width: ${e}px !important;height: ${n}px !important;min-width: ${e}px !important;min-height: ${n}px !important;box-sizing: border-box !important;overflow: hidden !important;background-clip: border-box !important;}`,(t.head||t.documentElement).appendChild(r),()=>{try{r.remove()}catch{}}}async function dn(t,e,n){const r=await an(t,3);if(!r)throw new Error("iframe document not accessible/ready");const{contentWidth:o,contentHeight:i,rect:s}=cn(t),a=n?.snap;if(!a||typeof a.toPng!="function")throw new Error("snapdom.toPng not available in iframe or window");const f={...n,scale:1},l=ln(r,o,i);let c;try{c=await a.toPng(r.documentElement,f)}finally{l()}c.style.display="block",c.style.width=`${o}px`,c.style.height=`${i}px`;const g=document.createElement("div");return e.nodeMap.set(g,t),ut(t,g,e,n),g.style.overflow="hidden",g.style.display="block",g.style.width||(g.style.width=`${Math.round(s.width)}px`),g.style.height||(g.style.height=`${Math.round(s.height)}px`),g.appendChild(c),g}async function xt(t,e,n){if(!t)throw new Error("Invalid node");const r=new Set;let o=null,i=null;if(t.nodeType===Node.ELEMENT_NODE){const l=(t.localName||t.tagName||"").toLowerCase();if(t.id==="snapdom-sandbox"||t.hasAttribute("data-snapdom-sandbox")||Le.has(l))return null}if(t.nodeType===Node.TEXT_NODE||t.nodeType!==Node.ELEMENT_NODE)return t.cloneNode(!0);if(t.getAttribute("data-capture")==="exclude"){const l=document.createElement("div"),c=t.getBoundingClientRect();return l.style.cssText=`display:inline-block;width:${c.width}px;height:${c.height}px;visibility:hidden;`,l}if(n.exclude&&Array.isArray(n.exclude))for(const l of n.exclude)try{if(t.matches?.(l)){const c=document.createElement("div"),g=t.getBoundingClientRect();return c.style.cssText=`display:inline-block;width:${g.width}px;height:${g.height}px;visibility:hidden;`,c}}catch(c){console.warn(`Invalid selector in exclude option: ${l}`,c)}if(typeof n.filter=="function")try{if(!n.filter(t)){const l=document.createElement("div"),c=t.getBoundingClientRect();return l.style.cssText=`display:inline-block;width:${c.width}px;height:${c.height}px;visibility:hidden;`,l}}catch(l){console.warn("Error in filter function:",l)}if(t.tagName==="IFRAME"){let l=!1;try{l=!!(t.contentDocument||t.contentWindow?.document)}catch{l=!1}if(l)try{return await dn(t,e,n)}catch(c){console.warn("[SnapDOM] iframe rasterization failed, fallback:",c)}if(n.placeholders){const c=document.createElement("div");return c.style.cssText=`width:${t.offsetWidth}px;height:${t.offsetHeight}px;background-image:repeating-linear-gradient(45deg,#ddd,#ddd 5px,#f9f9f9 5px,#f9f9f9 10px);display:flex;align-items:center;justify-content:center;font-size:12px;color:#555;border:1px solid #aaa;`,ut(t,c,e,n),c}else{const c=t.getBoundingClientRect(),g=document.createElement("div");return g.style.cssText=`display:inline-block;width:${c.width}px;height:${c.height}px;visibility:hidden;`,ut(t,g,e,n),g}}if(t.getAttribute("data-capture")==="placeholder"){const l=t.cloneNode(!1);e.nodeMap.set(l,t),ut(t,l,e,n);const c=document.createElement("div");return c.textContent=t.getAttribute("data-placeholder-text")||"",c.style.cssText="color:#666;font-size:12px;text-align:center;line-height:1.4;padding:0.5em;box-sizing:border-box;",l.appendChild(c),l}if(t.tagName==="CANVAS"){const l=t.toDataURL(),c=document.createElement("img");return c.src=l,c.width=t.width,c.height=t.height,e.nodeMap.set(c,t),ut(t,c,e,n),c}let s;try{if(s=t.cloneNode(!1),e.nodeMap.set(s,t),t.tagName==="IMG"){en(t,s);try{const l=t.getBoundingClientRect();let c=Math.round(l.width||0),g=Math.round(l.height||0);if(!c||!g){const T=window.getComputedStyle(t),O=parseFloat(T.width)||0,$=parseFloat(T.height)||0,A=parseInt(t.getAttribute("width")||"",10)||0,h=parseInt(t.getAttribute("height")||"",10)||0,d=t.width||t.naturalWidth||0,m=t.height||t.naturalHeight||0;c=Math.round(c||O||A||d||0),g=Math.round(g||$||h||m||0)}c&&(s.dataset.snapdomWidth=String(c)),g&&(s.dataset.snapdomHeight=String(g))}catch{}}}catch(l){throw console.error("[Snapdom] Failed to clone node:",t,l),l}if(t instanceof HTMLTextAreaElement){const l=t.getBoundingClientRect();s.style.width=`${l.width}px`,s.style.height=`${l.height}px`}if(t instanceof HTMLInputElement&&(s.value=t.value,s.setAttribute("value",t.value),t.checked!==void 0&&(s.checked=t.checked,t.checked&&s.setAttribute("checked",""),t.indeterminate&&(s.indeterminate=t.indeterminate))),t instanceof HTMLSelectElement&&(o=t.value),t instanceof HTMLTextAreaElement&&(i=t.value),ut(t,s,e,n),t.shadowRoot){let l=function(m,y){if(m.nodeType===Node.ELEMENT_NODE&&m.tagName==="STYLE")return y(null);xt(m,e,n).then(x=>{y(x||null)}).catch(x=>{y(null)})};try{const m=t.shadowRoot.querySelectorAll("slot");for(const y of m){let x=[];try{x=y.assignedNodes?.({flatten:!0})||y.assignedNodes?.()||[]}catch{x=y.assignedNodes?.()||[]}for(const k of x)r.add(k)}}catch{}const c=Qe(e),g=`[data-sd="${c}"]`;try{s.setAttribute("data-sd",c)}catch{}const T=Ze(t.shadowRoot),O=Je(T,g),$=nn(T),A=on(t,$,g);tn(s,A+O,c);const h=document.createDocumentFragment(),d=await Et(Array.from(t.shadowRoot.childNodes),l,n.fast);h.append(...d.filter(m=>!!m)),s.appendChild(h)}if(t.tagName==="SLOT"){let l=function($,A){xt($,e,n).then(h=>{h&&sn(h),A(h||null)}).catch(h=>{A(null)})};const c=t.assignedNodes?.({flatten:!0})||[],g=c.length>0?c:Array.from(t.childNodes),T=document.createDocumentFragment(),O=await Et(Array.from(g),l,n.fast);return T.append(...O.filter($=>!!$)),T}function a(l,c){if(r.has(l))return c(null);xt(l,e,n).then(g=>{c(g||null)}).catch(g=>{c(null)})}const f=await Et(Array.from(t.childNodes),a,n.fast);if(s.append(...f.filter(l=>!!l)),o!==null&&s instanceof HTMLSelectElement){s.value=o;for(const l of s.options)l.value===o?l.setAttribute("selected",""):l.removeAttribute("selected")}return i!==null&&s instanceof HTMLTextAreaElement&&(s.textContent=i),s}var un=[/font\s*awesome/i,/material\s*icons/i,/ionicons/i,/glyphicons/i,/feather/i,/bootstrap\s*icons/i,/remix\s*icons/i,/heroicons/i,/layui/i,/lucide/i],Rt=[];function fn(t){const e=Array.isArray(t)?t:[t];for(const n of e)n instanceof RegExp?Rt.push(n):typeof n=="string"?Rt.push(new RegExp(n,"i")):console.warn("[snapdom] Ignored invalid iconFont value:",n)}function st(t){const e=typeof t=="string"?t:"",n=[...un,...Rt];for(const r of n)if(r instanceof RegExp&&r.test(e))return!0;return!!(/icon/i.test(e)||/glyph/i.test(e)||/symbols/i.test(e)||/feather/i.test(e)||/fontawesome/i.test(e))}async function hn(t,e,n,r=32,o="#000"){e=e.replace(/^['"]+|['"]+$/g,"");const i=window.devicePixelRatio||1;await document.fonts.ready;const s=document.createElement("span");s.textContent=t,s.style.position="absolute",s.style.visibility="hidden",s.style.fontFamily=`"${e}"`,s.style.fontWeight=n||"normal",s.style.fontSize=`${r}px`,s.style.lineHeight="1",s.style.whiteSpace="nowrap",s.style.padding="0",s.style.margin="0",document.body.appendChild(s);const a=s.getBoundingClientRect(),f=Math.ceil(a.width),l=Math.ceil(a.height);document.body.removeChild(s);const c=document.createElement("canvas");c.width=f*i,c.height=l*i;const g=c.getContext("2d");return g.scale(i,i),g.font=n?`${n} ${r}px "${e}"`:`${r}px "${e}"`,g.textAlign="left",g.textBaseline="top",g.fillStyle=o,g.fillText(t,0,0),{dataUrl:c.toDataURL(),width:f,height:l}}var mn=new Set(["serif","sans-serif","monospace","cursive","fantasy","system-ui","emoji","math","fangsong","ui-serif","ui-sans-serif","ui-monospace","ui-rounded"]);function St(t){if(!t)return"";for(let e of t.split(",")){let n=e.trim().replace(/^['"]+|['"]+$/g,"");if(n&&!mn.has(n.toLowerCase()))return n}return""}function vt(t){const e=String(t??"400").trim().toLowerCase();if(e==="normal")return 400;if(e==="bold")return 700;const n=parseInt(e,10);return Number.isFinite(n)?Math.min(900,Math.max(100,n)):400}function _t(t){const e=String(t??"normal").trim().toLowerCase();return e.startsWith("italic")?"italic":e.startsWith("oblique")?"oblique":"normal"}function pn(t){const e=String(t??"100%").match(/(\d+(?:\.\d+)?)\s*%/);return e?Math.max(50,Math.min(200,parseFloat(e[1]))):100}function gn(t){const e=String(t||"400").trim(),n=e.match(/^(\d{2,3})\s+(\d{2,3})$/);if(n){const o=vt(n[1]),i=vt(n[2]);return{min:Math.min(o,i),max:Math.max(o,i)}}const r=vt(e);return{min:r,max:r}}function yn(t){const e=String(t||"normal").trim().toLowerCase();return e==="italic"?{kind:"italic"}:e.startsWith("oblique")?{kind:"oblique"}:{kind:"normal"}}function bn(t){const e=String(t||"100%").trim(),n=e.match(/(\d+(?:\.\d+)?)\s*%\s+(\d+(?:\.\d+)?)\s*%/);if(n){const i=parseFloat(n[1]),s=parseFloat(n[2]);return{min:Math.min(i,s),max:Math.max(i,s)}}const r=e.match(/(\d+(?:\.\d+)?)\s*%/),o=r?parseFloat(r[1]):100;return{min:o,max:o}}function wn(t,e){if(!t)return!1;try{const n=new URL(t,location.href);if(n.origin===location.origin)return!0;const o=n.host.toLowerCase();if(["fonts.googleapis.com","fonts.gstatic.com","use.typekit.net","p.typekit.net","kit.fontawesome.com","use.fontawesome.com"].some(a=>o.endsWith(a)))return!0;const s=(n.pathname+n.search).toLowerCase();if(/\bfont(s)?\b/.test(s)||/\.woff2?(\b|$)/.test(s))return!0;for(const a of e){const f=a.toLowerCase().replace(/\s+/g,"+"),l=a.toLowerCase().replace(/\s+/g,"-");if(s.includes(f)||s.includes(l))return!0}return!1}catch{return!1}}function xn(t){const e=new Set;for(const n of t||[]){const r=String(n).split("__")[0]?.trim();r&&e.add(r)}return e}async function Sn({required:t,usedCodepoints:e,exclude:n=void 0,localFonts:r=[],useProxy:o=""}={}){t instanceof Set||(t=new Set),e instanceof Set||(e=new Set);const i=new Map;for(const p of t){const[b,S,E,w]=String(p).split("__");if(!b)continue;const v=i.get(b)||[];v.push({w:parseInt(S,10),s:E,st:parseInt(w,10)}),i.set(b,v)}const s=/@import\s+url\(["']?([^"')]+)["']?\)/g,a=/url\((["']?)([^"')]+)\1\)/g,f=/@font-face[^{}]*\{[^}]*\}/g;function l(p,b,S,E){if(!i.has(p))return!1;const w=i.get(p),v=gn(S),N=yn(b),j=bn(E),P=v.min!==v.max,L=v.min,H=R=>N.kind==="normal"&&R==="normal"||N.kind!=="normal"&&(R==="italic"||R==="oblique");let V=!1;for(const R of w){const _=P?R.w>=v.min&&R.w<=v.max:R.w===L,z=H(_t(R.s)),M=R.st>=j.min&&R.st<=j.max;if(_&&z&&M){V=!0;break}}if(V)return!0;if(!P)for(const R of w){const _=H(_t(R.s)),z=R.st>=j.min&&R.st<=j.max;if(Math.abs(L-R.w)<=300&&_&&z)return!0}return!1}function c(p){if(!p)return[];const b=[],S=p.split(",").map(E=>E.trim()).filter(Boolean);for(const E of S){const w=E.match(/^U\+([0-9A-Fa-f?]+)(?:-([0-9A-Fa-f?]+))?$/);if(!w)continue;const v=w[1],N=w[2],j=P=>{if(!P.includes("?"))return parseInt(P,16);const L=parseInt(P.replace(/\?/g,"0"),16),H=parseInt(P.replace(/\?/g,"F"),16);return[L,H]};if(N){const P=j(v),L=j(N),H=Array.isArray(P)?P[0]:P,V=Array.isArray(L)?L[1]:L;b.push([Math.min(H,V),Math.max(H,V)])}else{const P=j(v);Array.isArray(P)?b.push([P[0],P[1]]):b.push([P,P])}}return b}function g(p,b){if(!b.length||!p||p.size===0)return!0;for(const S of p)for(const[E,w]of b)if(S>=E&&S<=w)return!0;return!1}function T(p,b){const S=[];if(!p)return S;for(const E of p.matchAll(a)){let w=(E[2]||"").trim();if(!(!w||w.startsWith("data:"))){if(!/^https?:/i.test(w))try{w=new URL(w,b||location.href).href}catch{}S.push(w)}}return S}async function O(p,b){let S=p;for(const E of p.matchAll(a)){const w=Ft(E[0]);if(!w)continue;let v=w;if(!v.startsWith("http")&&!v.startsWith("data:"))try{v=new URL(v,b||location.href).href}catch{}if(!st(v)){if(C.resource?.has(v)){C.font?.add(v),S=S.replace(E[0],`url(${C.resource.get(v)})`);continue}if(!C.font?.has(v))try{const N=await at(v,{as:"dataURL",useProxy:o,silent:!0});if(N.ok&&typeof N.data=="string"){const j=N.data;C.resource?.set(v,j),C.font?.add(v),S=S.replace(E[0],`url(${j})`)}}catch{console.warn("[snapDOM] Failed to fetch font resource:",v)}}}return S}function $(p){if(!p.length)return null;const b=(j,P)=>p.some(([L,H])=>!(H<j||L>P)),S=b(0,255)||b(305,305),E=b(256,591)||b(7680,7935),w=b(880,1023),v=b(1024,1279);return b(7840,7929)||b(258,259)||b(416,417)||b(431,432)?"vietnamese":v?"cyrillic":w?"greek":E?"latin-ext":S?"latin":null}function A(p={}){const b=new Set((p.families||[]).map(w=>String(w).toLowerCase())),S=new Set((p.domains||[]).map(w=>String(w).toLowerCase())),E=new Set((p.subsets||[]).map(w=>String(w).toLowerCase()));return(w,v)=>{if(b.size&&b.has(w.family.toLowerCase()))return!0;if(S.size)for(const N of w.srcUrls)try{if(S.has(new URL(N).host.toLowerCase()))return!0}catch{}if(E.size){const N=$(v);if(N&&E.has(N))return!0}return!1}}const h=A(n);function d(p){if(!p)return p;const b=/@font-face[^{}]*\{[^}]*\}/gi,S=new Set,E=[];for(const v of p.match(b)||[]){const N=v.match(/font-family:\s*([^;]+);/i)?.[1]||"",j=St(N),P=(v.match(/font-weight:\s*([^;]+);/i)?.[1]||"400").trim(),L=(v.match(/font-style:\s*([^;]+);/i)?.[1]||"normal").trim(),H=(v.match(/font-stretch:\s*([^;]+);/i)?.[1]||"100%").trim(),V=(v.match(/unicode-range:\s*([^;]+);/i)?.[1]||"").trim(),R=(v.match(/src\s*:\s*([^;]+);/i)?.[1]||"").trim(),_=T(R,location.href),z=_.length?_.map(X=>String(X).toLowerCase()).sort().join("|"):R.toLowerCase(),M=[String(j||"").toLowerCase(),P,L,H,V.toLowerCase(),z].join("|");S.has(M)||(S.add(M),E.push(v))}if(E.length===0)return p;let w=0;return p.replace(b,()=>E[w++]||"")}function m(){const p=Array.from(t||[]).sort().join("|"),b=n?JSON.stringify({families:(n.families||[]).map(w=>String(w).toLowerCase()).sort(),domains:(n.domains||[]).map(w=>String(w).toLowerCase()).sort(),subsets:(n.subsets||[]).map(w=>String(w).toLowerCase()).sort()}):"",S=(r||[]).map(w=>`${(w.family||"").toLowerCase()}::${w.weight||"normal"}::${w.style||"normal"}::${w.src||""}`).sort().join("|");return`fonts-embed-css::req=${p}::ex=${b}::lf=${S}::px=${o||""}`}const y=m();if(C.resource?.has(y))return C.resource.get(y);const x=xn(t),k=[];for(const p of document.querySelectorAll("style")){const b=p.textContent||"";for(const S of b.matchAll(s)){const E=S[1];if(!E||st(E))continue;!!document.querySelector(`link[rel="stylesheet"][href="${E}"]`)||k.push(E)}}k.length&&await Promise.all(k.map(p=>new Promise(b=>{if(document.querySelector(`link[rel="stylesheet"][href="${p}"]`))return b(null);const S=document.createElement("link");S.rel="stylesheet",S.href=p,S.setAttribute("data-snapdom","injected-import"),S.onload=()=>b(S),S.onerror=()=>b(null),document.head.appendChild(S)})));let F="";const W=Array.from(document.querySelectorAll('link[rel="stylesheet"]')).filter(p=>!!p.href);for(const p of W)try{if(st(p.href))continue;let b="",S=!1;try{S=new URL(p.href,location.href).origin===location.origin}catch{}if(!S&&!wn(p.href,x))continue;if(S){const w=Array.from(document.styleSheets).find(v=>v.href===p.href);if(w)try{const v=w.cssRules||[];b=Array.from(v).map(N=>N.cssText).join("")}catch{}}if(!b&&(b=(await at(p.href,{as:"text",useProxy:o})).data,st(p.href)))continue;let E="";for(const w of b.match(f)||[]){const v=(w.match(/font-family:\s*([^;]+);/i)?.[1]||"").trim(),N=St(v);if(!N||st(N))continue;const j=(w.match(/font-weight:\s*([^;]+);/i)?.[1]||"400").trim(),P=(w.match(/font-style:\s*([^;]+);/i)?.[1]||"normal").trim(),L=(w.match(/font-stretch:\s*([^;]+);/i)?.[1]||"100%").trim(),H=(w.match(/unicode-range:\s*([^;]+);/i)?.[1]||"").trim(),V=(w.match(/src\s*:\s*([^;]+);/i)?.[1]||"").trim(),R=T(V,p.href);if(!l(N,P,j,L))continue;const _=c(H);if(!g(e,_))continue;const z={family:N,weightSpec:j,styleSpec:P,stretchSpec:L,unicodeRange:H,srcRaw:V,srcUrls:R,href:p.href};if(n&&h(z,_))continue;const M=/url\(/i.test(V)?await O(w,p.href):w;E+=M+""}E.trim()&&(F+=E+"")}catch{console.warn("[snapdom] Failed to process stylesheet:",p.href)}for(const p of document.styleSheets)try{if(p.href&&W.some(S=>S.href===p.href))continue;const b=p.cssRules||[];for(const S of b){if(S.type!==CSSRule.FONT_FACE_RULE)continue;const E=(S.style.getPropertyValue("font-family")||"").trim(),w=St(E);if(!w||st(w))continue;const v=(S.style.getPropertyValue("font-weight")||"400").trim(),N=(S.style.getPropertyValue("font-style")||"normal").trim(),j=(S.style.getPropertyValue("font-stretch")||"100%").trim(),P=(S.style.getPropertyValue("src")||"").trim(),L=(S.style.getPropertyValue("unicode-range")||"").trim(),H=T(P,p.href||location.href);if(!l(w,N,v,j))continue;const V=c(L);if(!g(e,V))continue;const R={family:w,weightSpec:v,styleSpec:N,stretchSpec:j,unicodeRange:L,srcRaw:P,srcUrls:H,href:p.href||location.href};if(!(n&&h(R,V)))if(/url\(/i.test(P)){const _=await O(P,p.href||location.href);F+=`@font-face{font-family:${w};src:${_};font-style:${N};font-weight:${v};font-stretch:${j};${L?`unicode-range:${L};`:""}}`}else F+=`@font-face{font-family:${w};src:${P};font-style:${N};font-weight:${v};font-stretch:${j};${L?`unicode-range:${L};`:""}}`}}catch{}try{for(const p of document.fonts||[]){if(!p||!p.family||p.status!=="loaded"||!p._snapdomSrc)continue;const b=String(p.family).replace(/^['"]+|['"]+$/g,"");if(st(b)||!i.has(b)||n?.families&&n.families.some(E=>String(E).toLowerCase()===b.toLowerCase()))continue;let S=p._snapdomSrc;if(!String(S).startsWith("data:")){if(C.resource?.has(p._snapdomSrc))S=C.resource.get(p._snapdomSrc),C.font?.add(p._snapdomSrc);else if(!C.font?.has(p._snapdomSrc))try{const E=await at(p._snapdomSrc,{as:"dataURL",useProxy:o,silent:!0});if(E.ok&&typeof E.data=="string")S=E.data,C.resource?.set(p._snapdomSrc,S),C.font?.add(p._snapdomSrc);else continue}catch{console.warn("[snapdom] Failed to fetch dynamic font src:",p._snapdomSrc);continue}}F+=`@font-face{font-family:'${b}';src:url(${S});font-style:${p.style||"normal"};font-weight:${p.weight||"normal"};}`}}catch{}for(const p of r){if(!p||typeof p!="object")continue;const b=String(p.family||"").replace(/^['"]+|['"]+$/g,"");if(!b||st(b)||!i.has(b)||n?.families&&n.families.some(j=>String(j).toLowerCase()===b.toLowerCase()))continue;const S=p.weight!=null?String(p.weight):"normal",E=p.style!=null?String(p.style):"normal",w=p.stretchPct!=null?`${p.stretchPct}%`:"100%",v=String(p.src||"");let N=v;if(!N.startsWith("data:")){if(C.resource?.has(v))N=C.resource.get(v),C.font?.add(v);else if(!C.font?.has(v))try{const j=await at(v,{as:"dataURL",useProxy:o,silent:!0});if(j.ok&&typeof j.data=="string")N=j.data,C.resource?.set(v,N),C.font?.add(v);else continue}catch{console.warn("[snapdom] Failed to fetch localFonts src:",v);continue}}F+=`@font-face{font-family:'${b}';src:url(${N});font-style:${E};font-weight:${S};font-stretch:${w};}`}return F&&(F=d(F),C.resource?.set(y,F)),F}function vn(t){const e=new Set;if(!t)return e;const n=document.createTreeWalker(t,NodeFilter.SHOW_ELEMENT,null),r=s=>{const a=St(s.fontFamily);if(!a)return;const f=(l,c,g)=>`${a}__${vt(l)}__${_t(c)}__${pn(g)}`;e.add(f(s.fontWeight,s.fontStyle,s.fontStretch))};r(getComputedStyle(t));const o=getComputedStyle(t,"::before");o&&o.content&&o.content!=="none"&&r(o);const i=getComputedStyle(t,"::after");for(i&&i.content&&i.content!=="none"&&r(i);n.nextNode();){const s=n.currentNode,a=getComputedStyle(s);r(a);const f=getComputedStyle(s,"::before");f&&f.content&&f.content!=="none"&&r(f);const l=getComputedStyle(s,"::after");l&&l.content&&l.content!=="none"&&r(l)}return e}function Cn(t){const e=new Set,n=o=>{if(o)for(const i of o)e.add(i.codePointAt(0))},r=document.createTreeWalker(t,NodeFilter.SHOW_ELEMENT|NodeFilter.SHOW_TEXT,null);for(;r.nextNode();){const o=r.currentNode;if(o.nodeType===Node.TEXT_NODE)n(o.nodeValue||"");else if(o.nodeType===Node.ELEMENT_NODE){const i=o;for(const s of["::before","::after"]){const f=getComputedStyle(i,s)?.getPropertyValue("content");if(!(!f||f==="none"))if(/^"/.test(f)||/^'/.test(f))n(f.slice(1,-1));else{const l=f.match(/\\[0-9A-Fa-f]{1,6}/g);if(l)for(const c of l)try{e.add(parseInt(c.slice(1),16))}catch{}}}}}return e}async function kn(t,e=2){try{await document.fonts.ready}catch{}const n=Array.from(t||[]).filter(Boolean);if(n.length===0)return;const r=()=>{const o=document.createElement("div");o.style.cssText="position: absolute !important;left: -9999px !important;top: 0 !important;opacity: 0 !important;pointer-events: none !important;contain: layout size style;";for(const i of n){const s=document.createElement("span");s.textContent="AaBbGg1234ÁÉÍÓÚçñ—∞",s.style.fontFamily=`"${i}"`,s.style.fontWeight="700",s.style.fontStyle="italic",s.style.fontSize="32px",s.style.lineHeight="1",s.style.whiteSpace="nowrap",s.style.margin="0",s.style.padding="0",o.appendChild(s)}document.body.appendChild(o),o.offsetWidth,document.body.removeChild(o)};for(let o=0;o<Math.max(1,e);o++)r(),await new Promise(i=>requestAnimationFrame(()=>requestAnimationFrame(i)))}async function oe(t,e,n,r){if(!(t instanceof Element)||!(e instanceof Element))return;for(const s of["::before","::after","::first-letter"])try{const a=ee(t,s);if(!a||typeof a[Symbol.iterator]!="function"||a.content==="none"&&a.backgroundImage==="none"&&a.backgroundColor==="transparent"&&(a.borderStyle==="none"||parseFloat(a.borderWidth)===0)&&(!a.transform||a.transform==="none")&&a.display==="inline")continue;if(s==="::first-letter"){const R=getComputedStyle(t);if(!(a.color!==R.color||a.fontSize!==R.fontSize||a.fontWeight!==R.fontWeight))continue;const z=Array.from(e.childNodes).find(U=>U.nodeType===Node.TEXT_NODE&&U.textContent?.trim().length>0);if(!z)continue;const M=z.textContent,Q=M.match(/^([^\p{L}\p{N}\s]*[\p{L}\p{N}](?:['’])?)/u)?.[0],tt=M.slice(Q?.length||0);if(!Q||/[\uD800-\uDFFF]/.test(Q))continue;const G=document.createElement("span");G.textContent=Q,G.dataset.snapdomPseudo="::first-letter";const rt=Ht(a),lt=$t(rt,"span");n.styleMap.set(G,lt);const ct=document.createTextNode(tt);e.replaceChild(ct,z),e.insertBefore(G,ct);continue}const l=a.content,c=/counter\s*\(|counters\s*\(/.test(l)?"- ":qe(l),g=a.backgroundImage,T=a.backgroundColor,O=a.fontFamily,$=parseInt(a.fontSize)||32,A=parseInt(a.fontWeight)||!1,h=a.color||"#000",d=a.display,m=parseFloat(a.width),y=parseFloat(a.height),x=a.borderStyle,k=parseFloat(a.borderWidth),F=a.transform,W=st(O),p=l!=="none"&&c!=="",b=g&&g!=="none",S=T&&T!=="transparent"&&T!=="rgba(0, 0, 0, 0)",E=d!=="inline"&&(m>0||y>0),w=x&&x!=="none"&&k>0,v=F&&F!=="none";if(!(p||b||S||E||w||v))continue;const j=document.createElement("span");j.dataset.snapdomPseudo=s,j.style.verticalAlign="middle";const P=Ht(a),L=$t(P,"span");if(n.styleMap.set(j,L),W&&c.length===1){const{dataUrl:R,width:_,height:z}=await hn(c,O,A,$,h),M=document.createElement("img");M.src=R,M.style=`height:${$}px;width:${_/z*$}px;object-fit:contain;`,j.appendChild(M),e.dataset.snapdomHasIcon="true"}else if(c.startsWith("url(")){const R=Ft(c);if(R?.trim())try{const _=document.createElement("img"),z=await at(Qt(R),{as:"dataURL",useProxy:r.useProxy});_.src=z.data,_.style=`width:${$}px;height:auto;object-fit:contain;`,j.appendChild(_)}catch(_){console.error(`[snapdom] Error in pseudo ${s} for`,t,_)}}else!W&&p&&(j.textContent=c);if(b)try{const R=ne(g),_=await Promise.all(R.map(Zt));j.style.backgroundImage=_.join(", ")}catch(R){console.warn(`[snapdom] Failed to inline background-image for ${s}`,R)}if(S&&(j.style.backgroundColor=T),!(j.childNodes.length>0||j.textContent?.trim()!==""||b||S||E||w||v))continue;s==="::before"?e.insertBefore(j,e.firstChild):e.appendChild(j)}catch(a){console.warn(`[snapdom] Failed to capture ${s} for`,t,a)}const o=Array.from(t.children),i=Array.from(e.children).filter(s=>!s.dataset.snapdomPseudo);for(let s=0;s<Math.min(o.length,i.length);s++)await oe(o[s],i[s],n,r)}function An(t){if(!t)return;const e=new Set;if(t.querySelectorAll("use").forEach(a=>{const f=a.getAttribute("xlink:href")||a.getAttribute("href");f&&f.startsWith("#")&&e.add(f.slice(1))}),!e.size)return;const n=Array.from(document.querySelectorAll("svg > symbol, svg > defs")),r=n.filter(a=>a.tagName.toLowerCase()==="symbol"),o=n.filter(a=>a.tagName.toLowerCase()==="defs");let i=t.querySelector("svg.inline-defs-container");i||(i=document.createElementNS("http://www.w3.org/2000/svg","svg"),i.setAttribute("aria-hidden","true"),i.setAttribute("style","position: absolute; width: 0; height: 0; overflow: hidden;"),i.classList.add("inline-defs-container"),t.insertBefore(i,t.firstChild));const s=new Set;t.querySelectorAll("symbol[id], defs > *[id]").forEach(a=>{s.add(a.id)}),e.forEach(a=>{if(s.has(a))return;const f=r.find(l=>l.id===a);if(f){i.appendChild(f.cloneNode(!0)),s.add(a);return}for(const l of o){const c=l.querySelector(`#${CSS.escape(a)}`);if(c){let g=i.querySelector("defs");g||(g=document.createElementNS("http://www.w3.org/2000/svg","defs"),i.appendChild(g)),g.appendChild(c.cloneNode(!0)),s.add(a);break}}})}async function En(t,e={}){const n={styleMap:C.session.styleMap,styleCache:C.session.styleCache,nodeMap:C.session.nodeMap};let r,o="",i="";Tn(t);try{An(t)}catch(a){console.warn("inlineExternal defs or symbol failed:",a)}try{r=await xt(t,n,e,t)}catch(a){throw console.warn("deepClone failed:",a),a}try{await oe(t,r,n,e)}catch(a){console.warn("inlinePseudoElements failed:",a)}await Nn(r);try{const a=r.querySelectorAll("style[data-sd]");for(const f of a)i+=f.textContent||"",f.remove()}catch{}const s=De(n.styleMap);o=Array.from(s.entries()).map(([a,f])=>`.${f}{${a}}`).join(""),o=i+o;for(const[a,f]of n.styleMap.entries()){if(a.tagName==="STYLE")continue;if(a.getRootNode&&a.getRootNode()instanceof ShadowRoot){a.setAttribute("style",f.replace(/;/g,"; "));continue}const l=s.get(f);l&&a.classList.add(l);const c=a.style?.backgroundImage,g=a.dataset?.snapdomHasIcon;c&&c!=="none"&&(a.style.backgroundImage=c),g&&(a.style.verticalAlign="middle",a.style.display="inline")}for(const[a,f]of n.nodeMap.entries()){const l=f.scrollLeft,c=f.scrollTop;if((l||c)&&a instanceof HTMLElement){a.style.overflow="hidden",a.style.scrollbarWidth="none",a.style.msOverflowStyle="none";const T=document.createElement("div");for(T.style.transform=`translate(${-l}px, ${-c}px)`,T.style.willChange="transform",T.style.display="inline-block",T.style.width="100%";a.firstChild;)T.appendChild(a.firstChild);a.appendChild(T)}}if(t===n.nodeMap.get(r)){const a=n.styleCache.get(t)||window.getComputedStyle(t);n.styleCache.set(t,a);const f=je(a.transform);r.style.margin="0",r.style.position="static",r.style.top="auto",r.style.left="auto",r.style.right="auto",r.style.bottom="auto",r.style.zIndex="auto",r.style.float="none",r.style.clear="none",r.style.transform=f||""}for(const[a,f]of n.nodeMap.entries())f.tagName==="PRE"&&(a.style.marginTop="0",a.style.marginBlockStart="0");return{clone:r,classCSS:o,styleCache:n.styleCache}}function Tn(t){const e=getComputedStyle(t),n=e.outlineStyle,r=e.outlineWidth,o=e.borderStyle,i=e.borderWidth,s=n!=="none"&&parseFloat(r)>0,a=o==="none"||parseFloat(i)===0;s&&a&&(t.style.border=`${r} solid transparent`)}var ht=new Map;async function pt(t){if(C.resource?.has(t))return C.resource.get(t);if(ht.has(t))return ht.get(t);const e=(async()=>{const n=await at(t,{as:"dataURL",silent:!0});if(!n.ok||typeof n.data!="string")throw new Error(`[snapDOM] Failed to read blob URL: ${t}`);return C.resource?.set(t,n.data),n.data})();ht.set(t,e);try{const n=await e;return ht.set(t,n),n}catch(n){throw ht.delete(t),n}}var jn=/\bblob:[^)"'\s]+/g;async function Xt(t){if(!t||t.indexOf("blob:")===-1)return t;const e=Array.from(new Set(t.match(jn)||[]));if(e.length===0)return t;let n=t;for(const r of e)try{const o=await pt(r);n=n.split(r).join(o)}catch{}return n}function bt(t){return typeof t=="string"&&t.startsWith("blob:")}function $n(t){return(t||"").split(",").map(e=>e.trim()).filter(Boolean).map(e=>{const n=e.match(/^(\S+)(\s+.+)?$/);return n?{url:n[1],desc:n[2]||""}:null}).filter(Boolean)}function Mn(t){return t.map(e=>e.desc?`${e.url} ${e.desc.trim()}`:e.url).join(", ")}async function Nn(t){if(!t)return;const e=t.querySelectorAll?t.querySelectorAll("img"):[];for(const s of e)try{const f=s.getAttribute("src")||s.currentSrc||"";if(bt(f)){const c=await pt(f);s.setAttribute("src",c)}const l=s.getAttribute("srcset");if(l&&l.includes("blob:")){const c=$n(l);let g=!1;for(const T of c)if(bt(T.url))try{T.url=await pt(T.url),g=!0}catch{}g&&s.setAttribute("srcset",Mn(c))}}catch{}const n=t.querySelectorAll?t.querySelectorAll("image"):[];for(const s of n)try{const a="http://www.w3.org/1999/xlink",f=s.getAttribute("href")||s.getAttributeNS?.(a,"href");if(bt(f)){const l=await pt(f);s.setAttribute("href",l),s.removeAttributeNS?.(a,"href")}}catch{}const r=t.querySelectorAll?t.querySelectorAll("[style*='blob:']"):[];for(const s of r)try{const a=s.getAttribute("style");if(a&&a.includes("blob:")){const f=await Xt(a);s.setAttribute("style",f)}}catch{}const o=t.querySelectorAll?t.querySelectorAll("style"):[];for(const s of o)try{const a=s.textContent||"";a.includes("blob:")&&(s.textContent=await Xt(a))}catch{}const i=["poster"];for(const s of i){const a=t.querySelectorAll?t.querySelectorAll(`[${s}^='blob:']`):[];for(const f of a)try{const l=f.getAttribute(s);bt(l)&&f.setAttribute(s,await pt(l))}catch{}}}async function Rn(t,e={}){const n=Array.from(t.querySelectorAll("img")),r=async o=>{if(!o.getAttribute("src")){const c=o.currentSrc||o.src||"";c&&o.setAttribute("src",c)}o.removeAttribute("srcset"),o.removeAttribute("sizes");const i=o.src||"";if(!i)return;const s=await at(i,{as:"dataURL",useProxy:e.useProxy});if(s.ok&&typeof s.data=="string"&&s.data.startsWith("data:")){o.src=s.data,o.width||(o.width=o.naturalWidth||100),o.height||(o.height=o.naturalHeight||100);return}const{defaultImageUrl:a}=e||{};if(a)try{const c=parseInt(o.dataset?.snapdomWidth||"",10)||0,g=parseInt(o.dataset?.snapdomHeight||"",10)||0,T=parseInt(o.getAttribute("width")||"",10)||0,O=parseInt(o.getAttribute("height")||"",10)||0,$=parseFloat(o.style?.width||"")||0,A=parseFloat(o.style?.height||"")||0,h=c||$||T||o.width||void 0,d=g||A||O||o.height||void 0,m=typeof a=="function"?await a({width:h,height:d,src:i,element:o}):a;if(m){const y=await at(m,{as:"dataURL",useProxy:e.useProxy});o.src=y.data,!o.width&&h&&(o.width=h),!o.height&&d&&(o.height=d),o.width||(o.width=o.naturalWidth||100),o.height||(o.height=o.naturalHeight||100);return}}catch{}const f=o.width||o.naturalWidth||100,l=o.height||o.naturalHeight||100;if(e.placeholders!==!1){const c=document.createElement("div");c.style.cssText=[`width:${f}px`,`height:${l}px`,"background:#ccc","display:inline-block","text-align:center",`line-height:${l}px`,"color:#666","font-size:12px","overflow:hidden"].join(";"),c.textContent="img",o.replaceWith(c)}else{const c=document.createElement("div");c.style.cssText=`display:inline-block;width:${f}px;height:${l}px;visibility:hidden;`,o.replaceWith(c)}};for(let o=0;o<n.length;o+=4){const i=n.slice(o,o+4).map(r);await Promise.allSettled(i)}}async function _n(t,e,n,r={}){const o=[[t,e]],i=["background-image","mask","mask-image","-webkit-mask","-webkit-mask-image","mask-source","mask-box-image-source","mask-border-source","-webkit-mask-box-image-source","border-image","border-image-source"],s=["mask-position","mask-size","mask-repeat","-webkit-mask-position","-webkit-mask-size","-webkit-mask-repeat","mask-origin","mask-clip","-webkit-mask-origin","-webkit-mask-clip","-webkit-mask-position-x","-webkit-mask-position-y"],a=["border-image-slice","border-image-width","border-image-outset","border-image-repeat"];for(;o.length;){const[f,l]=o.shift(),c=n.get(f)||ee(f);n.has(f)||n.set(f,c);const g=(()=>{const $=c.getPropertyValue("border-image"),A=c.getPropertyValue("border-image-source");return $&&$!=="none"||A&&A!=="none"})();for(const $ of i){const A=c.getPropertyValue($);if(!A||A==="none")continue;const h=ne(A),d=await Promise.all(h.map(m=>Zt(m,r)));d.some(m=>m&&m!=="none"&&!/^url\(undefined/.test(m))&&l.style.setProperty($,d.join(", "))}for(const $ of s){const A=c.getPropertyValue($);!A||A==="initial"||l.style.setProperty($,A)}if(g)for(const $ of a){const A=c.getPropertyValue($);!A||A==="initial"||l.style.setProperty($,A)}const T=Array.from(f.children),O=Array.from(l.children);for(let $=0;$<Math.min(T.length,O.length);$++)o.push([T[$],O[$]])}}async function Fn(t,e){if(!t)throw new Error("Element cannot be null or undefined");Te(e.cache);const n=e.fast;let r,o,i,s="",a="",f,l;({clone:r,classCSS:o,styleCache:i}=await En(t,e)),await new Promise(O=>{dt(async()=>{await Rn(r,e),O()},{fast:n})}),await new Promise(O=>{dt(async()=>{await _n(t,r,i,e),O()},{fast:n})}),e.embedFonts&&await new Promise(O=>{dt(async()=>{const $=vn(t),A=Cn(t);if(re){const h=new Set(Array.from($).map(d=>String(d).split("__")[0]).filter(Boolean));await kn(h,5)}s=await Sn({required:$,usedCodepoints:A,exclude:e.excludeFonts,useProxy:e.useProxy}),O()},{fast:n})});const c=Be(r).sort(),g=c.join(",");C.baseStyle.has(g)?a=C.baseStyle.get(g):await new Promise(O=>{dt(()=>{a=Ue(c),C.baseStyle.set(g,a),O()},{fast:n})}),await new Promise(O=>{dt(()=>{const $=Ln(t);let A=$.width,h=$.height;const d=Number.isFinite(e.width),m=Number.isFinite(e.height),y=e.scale??1,x=typeof y=="number"&&y!==1;if(!x){const M=$.width/$.height;d&&m?(A=e.width,h=e.height):d?(A=e.width,h=A/M):m&&(h=e.height,A=h*M)}A=Math.max(1,Math.ceil(A)),h=Math.max(1,Math.ceil(h));const k=getComputedStyle(t),F=k.transform&&k.transform!=="none"?k.transform:"",W=On(t);let p,b,S,E,w=0,v=0;if(Wn(t)){const M=Dn({baseTransform:F,rotate:W.rotate||"0deg",scale:W.scale,translate:W.translate}),X=M.e??M.m41??0,Q=M.f??M.m42??0;w=-X,v=-Q;const tt=M.is2D?Gt(M):Gt(new DOMMatrix(M.toString())),G=In(A,h,tt);p=Math.max(1,Math.ceil(G.width)),b=Math.max(1,Math.ceil(G.height)),S=-G.minX,E=-G.minY}else{const M=t.getBoundingClientRect(),X=Bn(M,{top:0,right:0,bottom:0,left:0});p=Math.max(1,X.width),b=Math.max(1,X.height),S=-(X.x-Math.floor(M.left)),E=-(X.y-Math.floor(M.top))}const N="http://www.w3.org/2000/svg",j=document.createElementNS(N,"foreignObject");j.setAttribute("width","100%"),j.setAttribute("height","100%"),j.setAttribute("x",String(S)),j.setAttribute("y",String(E)),j.style.overflow="visible";const P=document.createElement("style");P.textContent=a+s+"svg{overflow:visible;} foreignObject{overflow:visible;}"+o,j.appendChild(P);const L=document.createElement("div");L.setAttribute("xmlns","http://www.w3.org/1999/xhtml"),L.style.width=`${A}px`,L.style.height=`${h}px`,L.style.overflow="visible",L.style.transformOrigin="0 0";const H=[];if((w||v)&&H.push(`translate(${w}px, ${v}px)`),!x&&(d||m)){const M=$.width?A/$.width:1,X=$.height?h/$.height:1;H.push(`scale(${M}, ${X})`)}else x&&H.push(`scale(${y})`);H.length&&(L.style.transform=H.join(" ")),r.setAttribute("xmlns","http://www.w3.org/1999/xhtml"),r.style.transformOrigin="0 0",r.style.position="static",r.style.left="0",r.style.top="0",F&&(r.style.transform=F),r.style.rotate=W.rotate||"0deg",r.style.scale=W.scale||"1",r.style.translate=W.translate||"0 0",L.appendChild(r),j.appendChild(L);const R=new XMLSerializer().serializeToString(j);l=`<svg xmlns="${N}" width="${p}" height="${b}" viewBox="0 0 ${p} ${b}">`+R+"</svg>",f=`data:image/svg+xml;charset=utf-8,${encodeURIComponent(l)}`,O()},{fast:n})});const T=document.getElementById("snapdom-sandbox");return T&&T.style.position==="absolute"&&T.remove(),f}function Ln(t){const e=getComputedStyle(t),n=i=>parseFloat(i)||0;let r=n(e.width),o=n(e.height);return e.boxSizing==="content-box"&&(r+=n(e.paddingLeft)+n(e.paddingRight)+n(e.borderLeftWidth)+n(e.borderRightWidth),o+=n(e.paddingTop)+n(e.paddingBottom)+n(e.borderTopWidth)+n(e.borderBottomWidth)),{width:r,height:o}}function Pn(t){const e=getComputedStyle(t).transform;if(!e||e==="none")return new DOMMatrix;try{return new DOMMatrix(e)}catch{return new WebKitCSSMatrix(e)}}function Gt(t){return new DOMMatrix([t.a,t.b,t.c,t.d,0,0])}function In(t,e,n){const o=[{x:0,y:0},{x:t,y:0},{x:0,y:e},{x:t,y:e}].map(l=>({x:n.a*l.x+n.c*l.y,y:n.b*l.x+n.d*l.y})),i=Math.min(...o.map(l=>l.x)),s=Math.max(...o.map(l=>l.x)),a=Math.min(...o.map(l=>l.y)),f=Math.max(...o.map(l=>l.y));return{minX:i,minY:a,width:s-i,height:f-a}}function On(t){const e={rotate:"0deg",scale:null,translate:null},n=t.computedStyleMap?.();if(n){const o=n.get("rotate");if(o){const a=o.angle??o;a&&"unit"in a?e.rotate=a.unit==="rad"?a.value*180/Math.PI+"deg":a.value+a.unit:e.rotate=String(o)}const i=n.get("scale");if(i&&i.length){const a=i[0]?.value??1,f=i[1]?.value??a;e.scale=`${a} ${f}`}const s=n.get("translate");if(s&&s.length){const a=s[0]?.value??0,f=s[1]?.value??0,l=s[0]?.unit??"px",c=s[1]?.unit??"px";e.translate=`${a}${l} ${f}${c}`}return e}const r=getComputedStyle(t);return e.rotate=r.rotate&&r.rotate!=="none"?r.rotate:"0deg",e.scale=r.scale&&r.scale!=="none"?r.scale:null,e.translate=r.translate&&r.translate!=="none"?r.translate:null,e}function Wn(t){const e=getComputedStyle(t).transform||"none";return!(e==="none"||e==="matrix(1, 0, 0, 1, 0, 0)"||/^matrix\(\s*1\s*,\s*0\s*,\s*0\s*,\s*1\s*,/i.test(e))}function Bn(t,e){const n=Math.floor(t.left-e.left),r=Math.floor(t.top-e.top),o=Math.ceil(t.width+e.left+e.right),i=Math.ceil(t.height+e.top+e.bottom);return{x:n,y:r,width:o,height:i}}var Tt=null;function Un(){if(Tt)return Tt;const t=document.createElement("div");return t.id="snapdom-measure-slot",t.setAttribute("aria-hidden","true"),Object.assign(t.style,{position:"absolute",left:"-99999px",top:"0px",width:"0px",height:"0px",overflow:"hidden",opacity:"0",pointerEvents:"none",contain:"size layout style"}),document.documentElement.appendChild(t),Tt=t,t}function Dn(t){const e=Un(),n=document.createElement("div");n.style.transformOrigin="0 0",t.baseTransform&&(n.style.transform=t.baseTransform),t.rotate&&(n.style.rotate=t.rotate),t.scale&&(n.style.scale=t.scale),t.translate&&(n.style.translate=t.translate),e.appendChild(n);const r=Pn(n);return e.removeChild(n),r}function qn(t){if(typeof t=="string"){const e=t.toLowerCase().trim();if(e==="disabled"||e==="full"||e==="auto"||e==="soft")return e}return"soft"}function Hn(t={}){const e=t.format??"png",n=qn(t.cache);return{debug:t.debug??!1,fast:t.fast??!0,scale:t.scale??1,exclude:t.exclude??[],filter:t.filter??null,placeholders:t.placeholders!==!1,embedFonts:t.embedFonts??!1,iconFonts:Array.isArray(t.iconFonts)?t.iconFonts:t.iconFonts?[t.iconFonts]:[],localFonts:Array.isArray(t.localFonts)?t.localFonts:[],excludeFonts:t.excludeFonts??void 0,defaultImageUrl:t.defaultImageUrl??void 0,cache:n,useProxy:typeof t.useProxy=="string"?t.useProxy:"",width:t.width??null,height:t.height??null,format:e,type:t.type??"svg",quality:t.quality??.92,dpr:t.dpr??(window.devicePixelRatio||1),backgroundColor:t.backgroundColor??(["jpg","jpeg","webp"].includes(e)?"#ffffff":null),filename:t.filename??"snapDOM"}}async function zn(t,e){const n=new Image;return n.src=t,await n.decode(),e.scale!==1&&(n.style.width=`${n.naturalWidth*e.scale}px`,n.style.height=`${n.naturalHeight*e.scale}px`),n}async function Ct(t,e){const{scale:n,dpr:r}=e,o=re(),i=new Image;i.crossOrigin="anonymous",i.loading="eager",i.decoding="sync",i.src=t;let s=null;o&&(s=document.createElement("div"),s.setAttribute("aria-hidden","true"),s.style.cssText="position:absolute;left:-99999px;top:0;width:0;height:0;overflow:hidden;opacity:0;pointer-events:none;contain:size layout style;",document.body.appendChild(s),s.appendChild(i)),await i.decode(),o&&await new Promise(g=>setTimeout(g,100));const a=i.naturalWidth*n,f=i.naturalHeight*n,l=document.createElement("canvas");l.width=Math.ceil(a*r),l.height=Math.ceil(f*r),l.style.width=`${a}px`,l.style.height=`${f}px`;const c=l.getContext("2d");if(r!==1&&c.scale(r,r),c.drawImage(i,0,0,a,f),s&&s.parentNode)try{s.parentNode.removeChild(s)}catch{}return l}async function se(t,e){const n=e.type;if(n==="svg"){const i=decodeURIComponent(t.split(",")[1]);return new Blob([i],{type:"image/svg+xml"})}const r=await Ct(t,e),o=e.backgroundColor?Lt(r,e.backgroundColor):r;return new Promise(i=>o.toBlob(s=>i(s),`image/${n}`,e.quality))}async function Vn(t,e){const n=await Ct(t,e),r=e.backgroundColor?Lt(n,e.backgroundColor):n,o=new Image;return o.src=r.toDataURL(`image/${e.format}`,e.quality),await o.decode(),o.style.width=`${r.width/e.dpr}px`,o.style.height=`${r.height/e.dpr}px`,o}async function Yn(t,e){if(e.format==="svg"){const i=await se(t,{...e,type:"svg"}),s=URL.createObjectURL(i),a=document.createElement("a");a.href=s,a.download=e.filename,a.click(),URL.revokeObjectURL(s);return}const n=await Ct(t,e),r=e.backgroundColor?Lt(n,e.backgroundColor):n,o=document.createElement("a");o.href=r.toDataURL(`image/${e.format}`,e.quality),o.download=e.filename,o.click()}var ae=Symbol("snapdom.internal");async function Y(t,e){if(!t)throw new Error("Element cannot be null or undefined");const n=Hn(e);return n.iconFonts&&n.iconFonts.length>0&&fn(n.iconFonts),n.snap||(n.snap={toPng:(r,o)=>Y.toPng(r,o),toImg:(r,o)=>Y.toImg(r,o)}),Y.capture(t,n,ae)}Y.capture=async(t,e,n)=>{if(n!==ae)throw new Error("[snapdom.capture] is internal. Use snapdom(...) instead.");const r=await Fn(t,e),o=s=>({...e,...s||{}}),i=s=>a=>{const f=o({...a||{},format:s}),l=s==="jpeg"||s==="jpg",c=f.backgroundColor==null||f.backgroundColor==="transparent";return l&&c&&(f.backgroundColor="#ffffff"),Vn(r,f)};return{url:r,toRaw:()=>r,toImg:s=>zn(r,o(s)),toCanvas:s=>Ct(r,o(s)),toBlob:s=>se(r,o(s)),toPng:i("png"),toJpg:i("jpeg"),toWebp:i("webp"),download:s=>Yn(r,o(s))}};Y.toRaw=(t,e)=>Y(t,e).then(n=>n.toRaw());Y.toImg=(t,e)=>Y(t,e).then(n=>n.toImg());Y.toCanvas=(t,e)=>Y(t,e).then(n=>n.toCanvas());Y.toBlob=(t,e)=>Y(t,e).then(n=>n.toBlob());Y.toPng=(t,e)=>Y(t,{...e,format:"png"}).then(n=>n.toPng());Y.toJpg=(t,e)=>Y(t,{...e,format:"jpeg"}).then(n=>n.toJpg());Y.toWebp=(t,e)=>Y(t,{...e,format:"webp"}).then(n=>n.toWebp());Y.download=(t,e)=>Y(t,e).then(n=>n.download());var jt,Kt;function Xn(){if(Kt)return jt;Kt=1;var t=function(m){return e(m)&&!n(m)};function e(d){return!!d&&typeof d=="object"}function n(d){var m=Object.prototype.toString.call(d);return m==="[object RegExp]"||m==="[object Date]"||i(d)}var r=typeof Symbol=="function"&&Symbol.for,o=r?Symbol.for("react.element"):60103;function i(d){return d.$$typeof===o}function s(d){return Array.isArray(d)?[]:{}}function a(d,m){return m.clone!==!1&&m.isMergeableObject(d)?A(s(d),d,m):d}function f(d,m,y){return d.concat(m).map(function(x){return a(x,y)})}function l(d,m){if(!m.customMerge)return A;var y=m.customMerge(d);return typeof y=="function"?y:A}function c(d){return Object.getOwnPropertySymbols?Object.getOwnPropertySymbols(d).filter(function(m){return Object.propertyIsEnumerable.call(d,m)}):[]}function g(d){return Object.keys(d).concat(c(d))}function T(d,m){try{return m in d}catch{return!1}}function O(d,m){return T(d,m)&&!(Object.hasOwnProperty.call(d,m)&&Object.propertyIsEnumerable.call(d,m))}function $(d,m,y){var x={};return y.isMergeableObject(d)&&g(d).forEach(function(k){x[k]=a(d[k],y)}),g(m).forEach(function(k){O(d,k)||(T(d,k)&&y.isMergeableObject(m[k])?x[k]=l(k,y)(d[k],m[k],y):x[k]=a(m[k],y))}),x}function A(d,m,y){y=y||{},y.arrayMerge=y.arrayMerge||f,y.isMergeableObject=y.isMergeableObject||t,y.cloneUnlessOtherwiseSpecified=a;var x=Array.isArray(m),k=Array.isArray(d),F=x===k;return F?x?y.arrayMerge(d,m,y):$(d,m,y):a(m,y)}A.all=function(m,y){if(!Array.isArray(m))throw new Error("first argument should be an array");return m.reduce(function(x,k){return A(x,k,y)},{})};var h=A;return jt=h,jt}Xn();function Rr({sale:t,salesItems:e,settings:n,user_name:r,credit_sale:o=!1}){const i=le().props.auth.user,s=kt.useRef(null),a=Ee.useReactToPrint({contentRef:s}),[f,l]=kt.useState(" "+t.sale_prefix+"/"+t.invoice_number),c=me(),g=()=>{const x=window.location.href,k=`Your purchase at ${n.shop_name} receipt: 
${x}`,F=encodeURIComponent(k);let W=t.whatsapp;if(!W&&(W=prompt("Please enter the WhatsApp number (including country code):","94"),!W)){alert("WhatsApp number is required to share the message.");return}const p=`https://wa.me/${W}?text=${F}`;window.open(p,"_blank")},T=async(x=!1,k="png")=>{if(!s.current)return;const F=s.current.cloneNode(!0);Object.assign(F.style,{width:"500px",position:"absolute",left:"-9999px",top:"-9999px",overflow:"hidden",fontSize:"14px",padding:x?"20px":"0"}),F.querySelectorAll("table").forEach(W=>{W.style.width="450px",W.style.minWidth="0",W.style.tableLayout="auto",W.style.overflow="hidden"}),document.body.appendChild(F);try{await Y.download(F,{filename:`receipt-${t.id}.${k}`,format:k,scale:2,quality:1,dpr:2}),console.log("Image downloaded successfully!")}catch(W){console.error("Failed to capture and download:",W)}finally{document.body.removeChild(F)}};kt.useEffect(()=>{window.handleImageDownload=T,window.snapdom=Y},[]);const O=Ot(Wt)(({theme:x})=>({width:"500px",padding:x.spacing(3),textAlign:"center","@media print":{boxShadow:"none",color:"black"}})),$=Ot(Wt)(({theme:x})=>({width:"100%",fontFamily:n.sale_print_font,textAlign:"center",boxShadow:"none","@media print":{boxShadow:"none",color:"black"}})),A={fontFamily:n.sale_print_font},h={printArea:{...A,fontSize:"16px",paddingRight:parseFloat(n.sale_print_padding_right),paddingLeft:parseFloat(n.sale_print_padding_left),color:"black !important"},receiptTopText:{...A,fontSize:"0.8em",fontWeight:"bold"},receiptSummaryText:{...A,fontSize:"0.8em",fontWeight:"bold",padding:0,borderBottom:"none",color:"black"},receiptSummaryTyp:{...A,fontSize:"1em",fontWeight:"bold",color:"black"},itemsHeader:{...A,fontSize:"0.8em",fontWeight:"bold",padding:"0.25rem 0"},itemsHeaderTyp:{...A,fontSize:"1em",fontWeight:"bold"},itemsCells:{...A,fontSize:"0.9em",fontWeight:"bold",padding:"0.25rem 0",verticalAlign:"middle"},itemsCellsTyp:{...A,fontSize:"0.9em",fontWeight:"bold"}};if(!t||Object.keys(t).length===0)return u.jsx(ft,{className:"flex justify-center mt-10 p-0",children:u.jsx(B,{variant:"h6",color:"error",children:"No pending sales available."})});const d=e.filter(x=>!x.charge_id),m=e.filter(x=>x.charge_id);d.reduce((x,k)=>x+k.discount*k.quantity,0);const y=d.reduce((x,k)=>{const F=Number(k.quantity)*(k.unit_price-k.discount)-Number(k.flat_discount);return x+F},0);return u.jsxs(u.Fragment,{children:[u.jsx(de,{title:"Sale Receipt"}),u.jsx(ft,{className:"flex justify-center mt-10 p-0 text-black",children:u.jsxs(O,{square:!1,className:"receipt-container",children:[u.jsxs(ft,{className:"flex justify-between mb-3 print:hidden text-black",children:[i&&u.jsx(Bt,{onClick:()=>window.history.back(),variant:"outlined",startIcon:u.jsx(ve,{}),children:"Back"}),i&&u.jsx(Ut,{onClick:g,color:"success",children:u.jsx(Ce,{fontSize:"medium"})}),u.jsx(Ut,{onClick:()=>T(!0,"jpg"),children:u.jsx(pe,{})}),u.jsx(Bt,{onClick:a,variant:"contained",endIcon:u.jsx(fe,{}),children:"Print"})]}),u.jsx("div",{id:"print-area",ref:s,className:"p-0 bg-white",style:h.printArea,children:u.jsxs($,{square:!1,children:[u.jsxs(ft,{className:"flex justify-center items-center mt-0 flex-col",children:[u.jsx(ge,{sx:{width:160,boxShadow:0},children:u.jsx(ye,{component:"img",image:window.location.origin+"/"+n.shop_logo})}),n.show_receipt_shop_name==1&&u.jsx(B,{variant:"h5",sx:{fontSize:"20px",fontFamily:n.sale_print_font,fontWeight:"bold"},color:"black",className:"receipt-shop-name",children:n.shop_name}),u.jsxs(B,{variant:"h6",sx:{fontSize:"15px",fontFamily:n.sale_print_font},color:"black",className:"receipt-address",children:[t.address,u.jsx("br",{}),t.contact_number]})]}),u.jsx(gt,{sx:{borderBottom:"1px dashed",borderColor:"black",my:"1rem"},className:"receipt-divider-after-address"}),u.jsxs(ft,{className:"flex items-start flex-col justify-start receipt-meta text-black",children:[!o&&u.jsxs(u.Fragment,{children:[u.jsxs(B,{sx:h.receiptTopText,color:"black",children:["Receipt No:",f]}),u.jsxs(B,{sx:h.receiptTopText,color:"black",textAlign:"start",children:["Date:",It(t.created_at).format("DD-MMM-YYYY, h:mm A")+" ","By: ",r]})]}),o&&u.jsx(u.Fragment,{children:u.jsxs(B,{sx:h.receiptTopText,color:"black",textAlign:"start",children:["Print date:",It(t.created_at).format("DD-MMM-YYYY, h:mm A")+" "]})}),u.jsxs(B,{sx:h.receiptTopText,color:"black",children:["Customer: ",t.name]})]}),u.jsx(gt,{sx:{borderBottom:"1px dashed",borderColor:"black",my:"1rem"},className:"receipt-divider-after-details"}),u.jsx(be,{sx:{height:"100%",overflow:"hidden"},children:u.jsxs(we,{sx:{padding:"0",height:"100%"},id:"receipt-items-table",children:[u.jsx(Se,{children:u.jsxs(Z,{className:"receipt-items-header",children:[u.jsx(q,{sx:h.itemsHeader,children:u.jsx(B,{sx:h.itemsHeaderTyp,color:"black",children:"Item"})}),u.jsx(q,{sx:h.itemsHeader,align:"right",children:u.jsx(B,{sx:h.itemsHeaderTyp,color:"black",children:"Qty."})}),u.jsx(q,{sx:h.itemsHeader,align:"right",children:u.jsx(B,{sx:h.itemsHeaderTyp,color:"black",children:"U.Price"})}),u.jsx(q,{sx:h.itemsHeader,align:"right",children:u.jsx(B,{sx:h.itemsHeaderTyp,color:"black",children:"Disc."})}),u.jsx(q,{sx:h.itemsHeader,align:"right",children:u.jsx(B,{sx:h.itemsHeaderTyp,color:"black",children:"Total"})})]})}),u.jsxs(xe,{children:[d.map((x,k)=>u.jsxs(ue.Fragment,{children:[u.jsx(Z,{className:"receipt-product-row",children:u.jsx(q,{colSpan:5,sx:{...h.itemsCells,borderBottom:"none",paddingBottom:0},children:u.jsx(B,{sx:h.itemsCellsTyp,color:"black",children:u.jsxs("strong",{children:[" ",k+1,".",x.name," ",x.account_number?"| "+x.account_number:""]})})})},`name-row-${k}`),u.jsxs(Z,{className:"receipt-details-row",children:[u.jsx(q,{sx:h.itemsCells,align:"right",colSpan:2,children:u.jsxs(B,{sx:h.itemsCellsTyp,color:"black",children:[u.jsx("strong",{children:x.quantity}),Number(x.free_quantity)!==0&&u.jsxs("strong",{children:[" + [Free: ",x.free_quantity,"]"]})]})}),u.jsx(q,{sx:h.itemsCells,align:"right",children:u.jsx(B,{sx:h.itemsCellsTyp,color:"black",children:c(x.unit_price,!1)})}),u.jsx(q,{sx:h.itemsCells,align:"right",children:u.jsx(B,{sx:h.itemsCellsTyp,color:"black",children:c(Number(x.discount*x.quantity)+Number(x.flat_discount),!1)})}),u.jsx(q,{sx:h.itemsCells,align:"right",children:u.jsx(B,{sx:h.itemsCellsTyp,color:"black",children:u.jsx("strong",{children:Number(x.quantity)*(x.unit_price-x.discount)===0?"Free":c(Number(x.quantity)*(x.unit_price-x.discount)-Number(x.flat_discount),!1)})})})]},`details-row-${k}`)]},`item-${k}`)),u.jsx(Z,{children:u.jsx(q,{colSpan:5,sx:{padding:"7px 0",borderBottom:"none"}})}),u.jsxs(Z,{sx:{border:"none"},className:"receipt-summary-row",children:[u.jsx(q,{sx:{...h.receiptSummaryText,paddingTop:2},colSpan:4,align:"right",children:u.jsx(B,{sx:h.receiptSummaryTyp,color:"black",children:"Total:"})}),u.jsx(q,{sx:{...h.receiptSummaryText,paddingTop:2},align:"right",children:u.jsx(B,{sx:h.receiptSummaryTyp,color:"black",children:c(y)})})]}),parseFloat(t.discount)!==0&&u.jsxs(Z,{sx:{border:"none"},className:"receipt-summary-row",children:[u.jsx(q,{sx:h.receiptSummaryText,colSpan:4,align:"right",children:u.jsx(B,{sx:h.receiptSummaryTyp,color:"black",children:"Discount:"})}),u.jsx(q,{sx:h.receiptSummaryText,align:"right",children:u.jsx(B,{sx:h.receiptSummaryTyp,color:"black",children:c(t.discount)})})]}),u.jsxs(Z,{sx:{border:"none"},className:"receipt-summary-row",children:[u.jsx(q,{sx:{...h.receiptSummaryText,paddingBottom:2},colSpan:4,align:"right",children:u.jsx(B,{sx:h.receiptSummaryTyp,color:"black",children:"Subtotal:"})}),u.jsx(q,{sx:{...h.receiptSummaryText,paddingBottom:2},align:"right",children:u.jsx(B,{sx:h.receiptSummaryTyp,color:"black",children:c(y-parseFloat(t.discount))})})]}),m.length>0&&u.jsx(u.Fragment,{children:m.map((x,k)=>u.jsxs(Z,{sx:{border:"none"},className:"receipt-charge-row",children:[u.jsx(q,{sx:h.itemsCells,colSpan:3,children:u.jsxs(B,{sx:h.itemsCellsTyp,color:"black",children:[x.description," ",x.rate_type==="percentage"?`(${x.rate_value}%)`:"(Fixed)"]})}),u.jsx(q,{sx:h.itemsCells,align:"right",colSpan:2,children:u.jsx(B,{sx:h.itemsCellsTyp,color:"black",children:c(x.unit_price)})})]},`charge-${k}`))}),m.length>0&&u.jsxs(Z,{sx:{border:"none"},className:"receipt-summary-row",children:[u.jsx(q,{sx:{...h.receiptSummaryText,paddingTop:2,paddingBottom:2},colSpan:4,align:"right",children:u.jsx(B,{sx:h.receiptSummaryTyp,color:"black",children:"Payable Amount:"})}),u.jsx(q,{sx:{...h.receiptSummaryText,paddingTop:2,paddingBottom:2},align:"right",children:u.jsx(B,{sx:h.receiptSummaryTyp,color:"black",children:c(t.total_amount)})})]}),u.jsxs(Z,{sx:{border:"none"},className:"receipt-summary-row",children:[u.jsx(q,{sx:h.receiptSummaryText,colSpan:4,align:"right",children:u.jsx(B,{sx:h.receiptSummaryTyp,color:"black",children:"Paid:"})}),u.jsx(q,{sx:h.receiptSummaryText,align:"right",children:u.jsx(B,{sx:h.receiptSummaryTyp,color:"black",children:c(t.amount_received)})})]}),u.jsxs(Z,{sx:{border:"none"},className:"receipt-summary-row",children:[u.jsx(q,{sx:h.receiptSummaryText,colSpan:4,align:"right",children:u.jsx(B,{sx:h.receiptSummaryTyp,color:"black",children:"Balance:"})}),u.jsx(q,{sx:h.receiptSummaryText,align:"right",children:u.jsx(B,{sx:h.receiptSummaryTyp,color:"black",children:c(parseFloat(t.amount_received)-parseFloat(t.total_amount))})})]}),o&&parseFloat(t.amount_received)-parseFloat(t.total_amount)!==parseFloat(t.balance)&&u.jsxs(u.Fragment,{children:[u.jsxs(Z,{sx:{border:"none"},className:"receipt-summary-row",children:[u.jsx(q,{sx:h.receiptSummaryText,colSpan:4,align:"right",children:u.jsx(B,{sx:h.receiptSummaryTyp,color:"black",children:"Old Balance:"})}),u.jsx(q,{sx:h.receiptSummaryText,align:"right",children:u.jsx(B,{sx:h.receiptSummaryTyp,color:"black",children:c(parseFloat(t.balance)-(parseFloat(t.amount_received)-parseFloat(t.total_amount)))})})]}),u.jsxs(Z,{sx:{border:"none"},className:"receipt-summary-row",children:[u.jsx(q,{sx:h.receiptSummaryText,colSpan:4,align:"right",children:u.jsx(B,{sx:h.receiptSummaryTyp,color:"black",children:"Total Balance:"})}),u.jsx(q,{sx:h.receiptSummaryText,align:"right",children:u.jsx(B,{sx:h.receiptSummaryTyp,color:"black",children:c(t.balance)})})]})]})]})]})}),u.jsx(gt,{sx:{borderBottom:"1px dashed",borderColor:"black",my:"1rem"},className:"receipt-divider-before-footer"}),u.jsx("div",{className:"receipt-barcode flex justify-center",children:u.jsx(he,{value:t.invoice_number})}),u.jsx(gt,{sx:{borderBottom:"1px dashed",borderColor:"black",my:"1rem"},className:"receipt-divider-before-footer"}),u.jsx("div",{className:"receipt-footer",style:h.receiptSummaryText,dangerouslySetInnerHTML:{__html:n.sale_receipt_note}}),u.jsx("div",{className:"receipt-second-note",style:h.receiptSummaryText,dangerouslySetInnerHTML:{__html:n.sale_receipt_second_note}})]})})]})})]})}export{Rr as default};
