import{r as v,j as s,R as Se,d as Te,H as Me,L as ue,a as Le}from"./app-J0J4XT7Q.js";import{A as Pe}from"./AuthenticatedLayout-CV1_pG3T.js";import{H as $e}from"./Home-NRzDHtrK.js";import"./en-gb-DyMZ2GQn.js";import{S as pe}from"./sweetalert2.esm.all-5zhdP7Ax.js";import{p as G}from"./index-COpDpgvE.js";import{S as De}from"./react-select.esm-DYJLO2tl.js";import{i as Ne}from"./browser-image-compression-BgY3rL5_.js";import{S as Re}from"./Save-xe2518z_.js";import{C as Ae}from"./CloudUpload-C4LIlrVf.js";import{A as We}from"./ArrowBackIosNew-mw4_sC1I.js";import{p as se}from"./product-placeholder-DL4NWfZp.js";import{B as J}from"./Box-m8-AwHvJ.js";import{B as Ue}from"./Breadcrumbs-DrlGONzO.js";import{T as oe}from"./Typography-CWhVrPo-.js";import{G as u}from"./Grid-ByMND7DF.js";import{T as z}from"./TextField-B8xGzqYR.js";import{M as A}from"./MenuItem-D4ZeVUNG.js";import{D as fe}from"./Divider-CCoppV9R.js";import{L as Fe,A as Ie,D as qe}from"./AdapterDayjs-Bfn7RJTy.js";import{c as ye}from"./clsx-B-dksMZM.js";import{g as xe,a as be,A as Ge,u as ve,s as le,b as te,c as je,m as Ce}from"./memoTheme-BNdxtxoW.js";import{c as He}from"./createSimplePaletteValueFilter-bm0fmN_7.js";import{B as Ve}from"./ButtonBase-ah7Qb79a.js";import{A as me}from"./Autocomplete-tKHD7bsB.js";import{C as Ye}from"./Card-B0NA572v.js";import{C as Xe}from"./CardMedia-DX-RIBFW.js";import{C as Qe}from"./CardActions-D9AO_Ds8.js";import{B as re}from"./Button-Bhgpz3NQ.js";import{A as Je}from"./AppBar-BfAA5r0X.js";import{T as Ze}from"./Toolbar-Bt5N0HeY.js";import"./app-CxSMgHDY.js";import"./createSvgIcon-DH-b1jMs.js";import"./Payments-C74n1UUC.js";import"./Receipt-CfgyI0Rt.js";import"./index-BOh9Hbob.js";import"./index-B49xHE6m.js";import"./infoshop-CyNm3vmK.js";import"./List-CA8Dfjeu.js";import"./ListContext-BTargF9Z.js";import"./ListItemButton-ChmwJdM0.js";import"./ListItemText-DbBV3q1i.js";import"./listItemTextClasses-BS0z-cUj.js";import"./useSlot-DIICVg-0.js";import"./useForkRef-npmdbavI.js";import"./TransitionGroupContext-CUmnvxwJ.js";import"./listItemIconClasses-CtCHhvqe.js";import"./Collapse-CMBVb5gg.js";import"./useTheme-CwSUTWIJ.js";import"./Portal-CVCC_lll.js";import"./index-FrVc2Q_M.js";import"./useTimeout-ijO9WPjY.js";import"./CssBaseline-BPSh959V.js";import"./index-i2kla6Uj.js";import"./extendSxProp-CT-SW93I.js";import"./emotion-react.browser.esm-BQ7e9N_g.js";import"./IconButton-CxCxJBhO.js";import"./useId-bmtMxKKl.js";import"./CircularProgress-Bcsy1Pin.js";import"./Tooltip-CQRdrBam.js";import"./index-DKn53RoO.js";import"./useControlled-CIU3udus.js";import"./Grow-Bu5k9bsZ.js";import"./Popper-DhnmPy4J.js";import"./ownerDocument-DW-IO8s5.js";import"./useSlotProps-BwjvMvhT.js";import"./Drawer-BUnkvJCp.js";import"./mergeSlotProps-D_PRovB-.js";import"./debounce-Be36O1Ab.js";import"./ownerWindow-HkKU3E4x.js";import"./Modal-r73ew4B0.js";import"./Paper-CavyNtF_.js";import"./ListItem-BIq8gZj4.js";import"./isMuiElement-glFYcxXS.js";import"./Select-ef7c0426.esm-ORlhB7cR.js";import"./toPropertyKey-C9c9JG92.js";import"./floating-ui.dom-CpMS8hwT.js";import"./useThemeProps-ChzuPIZh.js";import"./useFormControl-bsSDraOa.js";import"./dividerClasses-C03W2_nD.js";import"./index-BCKQ-IUm.js";import"./InputAdornment-8bA6TaeC.js";import"./DialogActions-3_XUqu2a.js";import"./Chip-rj_j5-pw.js";import"./DialogContent-BvzB3xZG.js";import"./index-BPJnJB5S.js";import"./Close-0jcZMw1s.js";import"./usePreviousProps-BagdRM8M.js";function et(e){return v.Children.toArray(e).filter(t=>v.isValidElement(t))}function tt(e){return be("MuiToggleButton",e)}const W=xe("MuiToggleButton",["root","disabled","selected","standard","primary","secondary","sizeSmall","sizeMedium","sizeLarge","fullWidth"]),we=v.createContext({}),_e=v.createContext(void 0);function st(e,t){return t===void 0||e===void 0?!1:Array.isArray(t)?t.includes(e):e===t}const ot=e=>{const{classes:t,fullWidth:o,selected:r,disabled:i,size:a,color:d}=e,n={root:["root",r&&"selected",i&&"disabled",o&&"fullWidth",`size${te(a)}`,d]};return je(n,tt,t)},rt=le(Ve,{name:"MuiToggleButton",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:o}=e;return[t.root,t[`size${te(o.size)}`]]}})(Ce(({theme:e})=>({...e.typography.button,borderRadius:(e.vars||e).shape.borderRadius,padding:11,border:`1px solid ${(e.vars||e).palette.divider}`,color:(e.vars||e).palette.action.active,[`&.${W.disabled}`]:{color:(e.vars||e).palette.action.disabled,border:`1px solid ${(e.vars||e).palette.action.disabledBackground}`},"&:hover":{textDecoration:"none",backgroundColor:e.alpha((e.vars||e).palette.text.primary,(e.vars||e).palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}},variants:[{props:{color:"standard"},style:{[`&.${W.selected}`]:{color:(e.vars||e).palette.text.primary,backgroundColor:e.alpha((e.vars||e).palette.text.primary,(e.vars||e).palette.action.selectedOpacity),"&:hover":{backgroundColor:e.alpha((e.vars||e).palette.text.primary,`${(e.vars||e).palette.action.selectedOpacity} + ${(e.vars||e).palette.action.hoverOpacity}`),"@media (hover: none)":{backgroundColor:e.alpha((e.vars||e).palette.text.primary,(e.vars||e).palette.action.selectedOpacity)}}}}},...Object.entries(e.palette).filter(He()).map(([t])=>({props:{color:t},style:{[`&.${W.selected}`]:{color:(e.vars||e).palette[t].main,backgroundColor:e.alpha((e.vars||e).palette[t].main,(e.vars||e).palette.action.selectedOpacity),"&:hover":{backgroundColor:e.alpha((e.vars||e).palette[t].main,`${(e.vars||e).palette.action.selectedOpacity} + ${(e.vars||e).palette.action.hoverOpacity}`),"@media (hover: none)":{backgroundColor:e.alpha((e.vars||e).palette[t].main,(e.vars||e).palette.action.selectedOpacity)}}}}})),{props:{fullWidth:!0},style:{width:"100%"}},{props:{size:"small"},style:{padding:7,fontSize:e.typography.pxToRem(13)}},{props:{size:"large"},style:{padding:15,fontSize:e.typography.pxToRem(15)}}]}))),it=v.forwardRef(function(t,o){const{value:r,...i}=v.useContext(we),a=v.useContext(_e),d=Ge({...i,selected:st(t.value,r)},t),n=ve({props:d,name:"MuiToggleButton"}),{children:x,className:j,color:b="standard",disabled:C=!1,disableFocusRipple:w=!1,fullWidth:c=!1,onChange:K,onClick:k,selected:E,size:N="medium",value:M,...U}=n,P={...n,color:b,disabled:C,disableFocusRipple:w,fullWidth:c,size:N},h=ot(P),R=_=>{k&&(k(_,M),_.defaultPrevented)||K&&K(_,M)},f=a||"";return s.jsx(rt,{className:ye(i.className,h.root,j,f),disabled:C,focusRipple:!w,ref:o,onClick:R,onChange:K,value:M,ownerState:P,"aria-pressed":E,...U,children:x})});function nt(e){return be("MuiToggleButtonGroup",e)}const p=xe("MuiToggleButtonGroup",["root","selected","horizontal","vertical","disabled","grouped","groupedHorizontal","groupedVertical","fullWidth","firstButton","lastButton","middleButton"]),at=e=>{const{classes:t,orientation:o,fullWidth:r,disabled:i}=e,a={root:["root",o,r&&"fullWidth"],grouped:["grouped",`grouped${te(o)}`,i&&"disabled"],firstButton:["firstButton"],lastButton:["lastButton"],middleButton:["middleButton"]};return je(a,nt,t)},lt=le("div",{name:"MuiToggleButtonGroup",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:o}=e;return[{[`& .${p.grouped}`]:t.grouped},{[`& .${p.grouped}`]:t[`grouped${te(o.orientation)}`]},{[`& .${p.firstButton}`]:t.firstButton},{[`& .${p.lastButton}`]:t.lastButton},{[`& .${p.middleButton}`]:t.middleButton},t.root,o.orientation==="vertical"&&t.vertical,o.fullWidth&&t.fullWidth]}})(Ce(({theme:e})=>({display:"inline-flex",borderRadius:(e.vars||e).shape.borderRadius,variants:[{props:{orientation:"vertical"},style:{flexDirection:"column",[`& .${p.grouped}`]:{[`&.${p.selected} + .${p.grouped}.${p.selected}`]:{borderTop:0,marginTop:0}},[`& .${p.firstButton},& .${p.middleButton}`]:{borderBottomLeftRadius:0,borderBottomRightRadius:0},[`& .${p.lastButton},& .${p.middleButton}`]:{marginTop:-1,borderTop:"1px solid transparent",borderTopLeftRadius:0,borderTopRightRadius:0},[`& .${p.lastButton}.${W.disabled},& .${p.middleButton}.${W.disabled}`]:{borderTop:"1px solid transparent"}}},{props:{fullWidth:!0},style:{width:"100%"}},{props:{orientation:"horizontal"},style:{[`& .${p.grouped}`]:{[`&.${p.selected} + .${p.grouped}.${p.selected}`]:{borderLeft:0,marginLeft:0}},[`& .${p.firstButton},& .${p.middleButton}`]:{borderTopRightRadius:0,borderBottomRightRadius:0},[`& .${p.lastButton},& .${p.middleButton}`]:{marginLeft:-1,borderLeft:"1px solid transparent",borderTopLeftRadius:0,borderBottomLeftRadius:0},[`& .${p.lastButton}.${W.disabled},& .${p.middleButton}.${W.disabled}`]:{borderLeft:"1px solid transparent"}}}]}))),ct=v.forwardRef(function(t,o){const r=ve({props:t,name:"MuiToggleButtonGroup"}),{children:i,className:a,color:d="standard",disabled:n=!1,exclusive:x=!1,fullWidth:j=!1,onChange:b,orientation:C="horizontal",size:w="medium",value:c,...K}=r,k={...r,disabled:n,fullWidth:j,orientation:C,size:w},E=at(k),N=v.useCallback((f,_)=>{if(!b)return;const $=c&&c.indexOf(_);let F;c&&$>=0?(F=c.slice(),F.splice($,1)):F=c?c.concat(_):[_],b(f,F)},[b,c]),M=v.useCallback((f,_)=>{b&&b(f,c===_?null:_)},[b,c]),U=v.useMemo(()=>({className:E.grouped,onChange:x?M:N,value:c,size:w,fullWidth:j,color:d,disabled:n}),[E.grouped,x,M,N,c,w,j,d,n]),P=et(i),h=P.length,R=f=>{const _=f===0,$=f===h-1;return _&&$?"":_?E.firstButton:$?E.lastButton:E.middleButton};return s.jsx(lt,{role:"group",className:ye(E.root,a),ref:o,ownerState:k,...K,children:s.jsx(we.Provider,{value:U,children:P.map((f,_)=>s.jsx(_e.Provider,{value:R(_),children:f},_))})})}),ie=typeof navigator<"u"?navigator.userAgent.toLowerCase().indexOf("firefox")>0:!1;function ne(e,t,o,r){e.addEventListener?e.addEventListener(t,o,r):e.attachEvent&&e.attachEvent("on".concat(t),o)}function H(e,t,o,r){e.removeEventListener?e.removeEventListener(t,o,r):e.detachEvent&&e.detachEvent("on".concat(t),o)}function Be(e,t){const o=t.slice(0,t.length-1);for(let r=0;r<o.length;r++)o[r]=e[o[r].toLowerCase()];return o}function ke(e){typeof e!="string"&&(e=""),e=e.replace(/\s/g,"");const t=e.split(",");let o=t.lastIndexOf("");for(;o>=0;)t[o-1]+=",",t.splice(o,1),o=t.lastIndexOf("");return t}function dt(e,t){const o=e.length>=t.length?e:t,r=e.length>=t.length?t:e;let i=!0;for(let a=0;a<o.length;a++)r.indexOf(o[a])===-1&&(i=!1);return i}const Y={backspace:8,"⌫":8,tab:9,clear:12,enter:13,"↩":13,return:13,esc:27,escape:27,space:32,left:37,up:38,right:39,down:40,del:46,delete:46,ins:45,insert:45,home:36,end:35,pageup:33,pagedown:34,capslock:20,num_0:96,num_1:97,num_2:98,num_3:99,num_4:100,num_5:101,num_6:102,num_7:103,num_8:104,num_9:105,num_multiply:106,num_add:107,num_enter:108,num_subtract:109,num_decimal:110,num_divide:111,"⇪":20,",":188,".":190,"/":191,"`":192,"-":ie?173:189,"=":ie?61:187,";":ie?59:186,"'":222,"[":219,"]":221,"\\":220},T={"⇧":16,shift:16,"⌥":18,alt:18,option:18,"⌃":17,ctrl:17,control:17,"⌘":91,cmd:91,command:91},ee={16:"shiftKey",18:"altKey",17:"ctrlKey",91:"metaKey",shiftKey:16,ctrlKey:17,altKey:18,metaKey:91},B={16:!1,18:!1,17:!1,91:!1},y={};for(let e=1;e<20;e++)Y["f".concat(e)]=111+e;let g=[],V=null,ze="all";const L=new Map,Q=e=>Y[e.toLowerCase()]||T[e.toLowerCase()]||e.toUpperCase().charCodeAt(0),ut=e=>Object.keys(Y).find(t=>Y[t]===e),pt=e=>Object.keys(T).find(t=>T[t]===e);function Ke(e){ze=e||"all"}function X(){return ze||"all"}function ft(){return g.slice(0)}function mt(){return g.map(e=>ut(e)||pt(e)||String.fromCharCode(e))}function gt(){const e=[];return Object.keys(y).forEach(t=>{y[t].forEach(o=>{let{key:r,scope:i,mods:a,shortcut:d}=o;e.push({scope:i,shortcut:d,mods:a,keys:r.split("+").map(n=>Q(n))})})}),e}function ht(e){const t=e.target||e.srcElement,{tagName:o}=t;let r=!0;const i=o==="INPUT"&&!["checkbox","radio","range","button","file","reset","submit","color"].includes(t.type);return(t.isContentEditable||(i||o==="TEXTAREA"||o==="SELECT")&&!t.readOnly)&&(r=!1),r}function yt(e){return typeof e=="string"&&(e=Q(e)),g.indexOf(e)!==-1}function xt(e,t){let o,r;e||(e=X());for(const i in y)if(Object.prototype.hasOwnProperty.call(y,i))for(o=y[i],r=0;r<o.length;)o[r].scope===e?o.splice(r,1).forEach(d=>{let{element:n}=d;return ce(n)}):r++;X()===e&&Ke(t||"all")}function bt(e){let t=e.keyCode||e.which||e.charCode;const o=g.indexOf(t);if(o>=0&&g.splice(o,1),e.key&&e.key.toLowerCase()==="meta"&&g.splice(0,g.length),(t===93||t===224)&&(t=91),t in B){B[t]=!1;for(const r in T)T[r]===t&&(O[r]=!1)}}function Ee(e){if(typeof e>"u")Object.keys(y).forEach(i=>{Array.isArray(y[i])&&y[i].forEach(a=>Z(a)),delete y[i]}),ce(null);else if(Array.isArray(e))e.forEach(i=>{i.key&&Z(i)});else if(typeof e=="object")e.key&&Z(e);else if(typeof e=="string"){for(var t=arguments.length,o=new Array(t>1?t-1:0),r=1;r<t;r++)o[r-1]=arguments[r];let[i,a]=o;typeof i=="function"&&(a=i,i=""),Z({key:e,scope:i,method:a,splitKey:"+"})}}const Z=e=>{let{key:t,scope:o,method:r,splitKey:i="+"}=e;ke(t).forEach(d=>{const n=d.split(i),x=n.length,j=n[x-1],b=j==="*"?"*":Q(j);if(!y[b])return;o||(o=X());const C=x>1?Be(T,n):[],w=[];y[b]=y[b].filter(c=>{const k=(r?c.method===r:!0)&&c.scope===o&&dt(c.mods,C);return k&&w.push(c.element),!k}),w.forEach(c=>ce(c))})};function ge(e,t,o,r){if(t.element!==r)return;let i;if(t.scope===o||t.scope==="all"){i=t.mods.length>0;for(const a in B)Object.prototype.hasOwnProperty.call(B,a)&&(!B[a]&&t.mods.indexOf(+a)>-1||B[a]&&t.mods.indexOf(+a)===-1)&&(i=!1);(t.mods.length===0&&!B[16]&&!B[18]&&!B[17]&&!B[91]||i||t.shortcut==="*")&&(t.keys=[],t.keys=t.keys.concat(g),t.method(e,t)===!1&&(e.preventDefault?e.preventDefault():e.returnValue=!1,e.stopPropagation&&e.stopPropagation(),e.cancelBubble&&(e.cancelBubble=!0)))}}function he(e,t){const o=y["*"];let r=e.keyCode||e.which||e.charCode;if(!O.filter.call(this,e))return;if((r===93||r===224)&&(r=91),g.indexOf(r)===-1&&r!==229&&g.push(r),["metaKey","ctrlKey","altKey","shiftKey"].forEach(n=>{const x=ee[n];e[n]&&g.indexOf(x)===-1?g.push(x):!e[n]&&g.indexOf(x)>-1?g.splice(g.indexOf(x),1):n==="metaKey"&&e[n]&&(g=g.filter(j=>j in ee||j===r))}),r in B){B[r]=!0;for(const n in T)T[n]===r&&(O[n]=!0);if(!o)return}for(const n in B)Object.prototype.hasOwnProperty.call(B,n)&&(B[n]=e[ee[n]]);e.getModifierState&&!(e.altKey&&!e.ctrlKey)&&e.getModifierState("AltGraph")&&(g.indexOf(17)===-1&&g.push(17),g.indexOf(18)===-1&&g.push(18),B[17]=!0,B[18]=!0);const i=X();if(o)for(let n=0;n<o.length;n++)o[n].scope===i&&(e.type==="keydown"&&o[n].keydown||e.type==="keyup"&&o[n].keyup)&&ge(e,o[n],i,t);if(!(r in y))return;const a=y[r],d=a.length;for(let n=0;n<d;n++)if((e.type==="keydown"&&a[n].keydown||e.type==="keyup"&&a[n].keyup)&&a[n].key){const x=a[n],{splitKey:j}=x,b=x.key.split(j),C=[];for(let w=0;w<b.length;w++)C.push(Q(b[w]));C.sort().join("")===g.sort().join("")&&ge(e,x,i,t)}}function O(e,t,o){g=[];const r=ke(e);let i=[],a="all",d=document,n=0,x=!1,j=!0,b="+",C=!1,w=!1;for(o===void 0&&typeof t=="function"&&(o=t),Object.prototype.toString.call(t)==="[object Object]"&&(t.scope&&(a=t.scope),t.element&&(d=t.element),t.keyup&&(x=t.keyup),t.keydown!==void 0&&(j=t.keydown),t.capture!==void 0&&(C=t.capture),typeof t.splitKey=="string"&&(b=t.splitKey),t.single===!0&&(w=!0)),typeof t=="string"&&(a=t),w&&Ee(e,a);n<r.length;n++)e=r[n].split(b),i=[],e.length>1&&(i=Be(T,e)),e=e[e.length-1],e=e==="*"?"*":Q(e),e in y||(y[e]=[]),y[e].push({keyup:x,keydown:j,scope:a,mods:i,shortcut:r[n],method:o,key:r[n],splitKey:b,element:d});if(typeof d<"u"&&window){if(!L.has(d)){const c=function(){let k=arguments.length>0&&arguments[0]!==void 0?arguments[0]:window.event;return he(k,d)},K=function(){let k=arguments.length>0&&arguments[0]!==void 0?arguments[0]:window.event;he(k,d),bt(k)};L.set(d,{keydownListener:c,keyupListenr:K,capture:C}),ne(d,"keydown",c,C),ne(d,"keyup",K,C)}if(!V){const c=()=>{g=[]};V={listener:c,capture:C},ne(window,"focus",c,C)}}}function vt(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"all";Object.keys(y).forEach(o=>{y[o].filter(i=>i.scope===t&&i.shortcut===e).forEach(i=>{i&&i.method&&i.method()})})}function ce(e){const t=Object.values(y).flat();if(t.findIndex(r=>{let{element:i}=r;return i===e})<0){const{keydownListener:r,keyupListenr:i,capture:a}=L.get(e)||{};r&&i&&(H(e,"keyup",i,a),H(e,"keydown",r,a),L.delete(e))}if((t.length<=0||L.size<=0)&&(Object.keys(L).forEach(i=>{const{keydownListener:a,keyupListenr:d,capture:n}=L.get(i)||{};a&&d&&(H(i,"keyup",d,n),H(i,"keydown",a,n),L.delete(i))}),L.clear(),Object.keys(y).forEach(i=>delete y[i]),V)){const{listener:i,capture:a}=V;H(window,"focus",i,a),V=null}}const ae={getPressedKeyString:mt,setScope:Ke,getScope:X,deleteScope:xt,getPressedKeyCodes:ft,getAllKeyCodes:gt,isPressed:yt,filter:ht,trigger:vt,unbind:Ee,keyMap:Y,modifier:T,modifierMap:ee};for(const e in ae)Object.prototype.hasOwnProperty.call(ae,e)&&(O[e]=ae[e]);if(typeof window<"u"){const e=window.hotkeys;O.noConflict=t=>(t&&window.hotkeys===O&&(window.hotkeys=e),O),window.hotkeys=O}class de extends Se.Component{constructor(t){super(t),this.isKeyDown=!1,this.handle=void 0,this.onKeyDown=this.onKeyDown.bind(this),this.onKeyUp=this.onKeyUp.bind(this),this.handleKeyUpEvent=this.handleKeyUpEvent.bind(this),this.handle={}}componentDidMount(){var{filter:t,splitKey:o}=this.props;t&&(O.filter=t),O.unbind(this.props.keyName),O(this.props.keyName,{splitKey:o},this.onKeyDown),document&&document.body.addEventListener("keyup",this.handleKeyUpEvent)}componentWillUnmount(){O.unbind(this.props.keyName),this.isKeyDown=!0,this.handle={},document&&document.body.removeEventListener("keyup",this.handleKeyUpEvent)}onKeyUp(t,o){var{onKeyUp:r,disabled:i}=this.props;!i&&r&&r(o.shortcut,t,o)}onKeyDown(t,o){var{onKeyDown:r,allowRepeat:i,disabled:a}=this.props;this.isKeyDown&&!i||(this.isKeyDown=!0,this.handle=o,!a&&r&&r(o.shortcut,t,o))}handleKeyUpEvent(t){this.isKeyDown&&(this.isKeyDown=!1,!(this.props.keyName&&this.props.keyName.indexOf(this.handle.shortcut)<0)&&(this.onKeyUp(t,this.handle),this.handle={}))}render(){return this.props.children||null}}de.defaultProps={filter(e){var t=e.target||e.srcElement,o=t.tagName;return!(t.isContentEditable||o==="INPUT"||o==="SELECT"||o==="TEXTAREA")}};de.propTypes={keyName:G.string,filter:G.func,onKeyDown:G.func,onKeyUp:G.func,disabled:G.bool,splitKey:G.string};const jt=le("input")({clip:"rect(0 0 0 0)",clipPath:"inset(50%)",height:1,overflow:"hidden",position:"absolute",bottom:0,left:0,whiteSpace:"nowrap",width:1});function so({product:e,collection:t,product_code:o,contacts:r,product_alert:i,misc_setting:a}){const[d,n]=v.useState("percentage"),[x,j]=v.useState(!1),[b,C]=v.useState(null),w=10*1024*1024,c=t.filter(l=>l.collection_type==="brand").map(({id:l,name:m})=>({id:l,label:m})),K=t.filter(l=>l.collection_type==="category").map(({id:l,name:m})=>({id:l,label:m})),[k,E]=v.useState("1"),[N,M]=v.useState(c.find(l=>l.id===null)||null),[U,P]=v.useState(K.find(l=>l.id===null)||null),[h,R]=v.useState({name:"",description:"",sku:"",barcode:o,featured_image:se,unit:"PC",quantity:"",alert_quantity:i,is_stock_managed:1,is_active:1,brand_id:"",category_id:"",product_type:"simple",fixed_commission:0,batch_number:Te().format("DDMMYYYY"),discount:0,discount_percentage:0,price:""}),f=l=>{const{name:m,value:S,type:I,checked:D}=l.target,q={...h,[m]:I==="checkbox"?D:S};m==="discount_percentage"?(q.discount="0",q.discount_percentage=S):m==="discount"&&(q.discount_percentage="0"),R(q)},_=async l=>{const m=l.target.files[0];if(m&&m.size>w){alert("File size exceeds the 2MB limit.");return}if(m)try{const S={maxSizeMB:a&&a.optimize_image_size||.5,maxWidthOrHeight:a&&a.optimize_image_width||720,useWebWorker:!0};console.log(S);const I=await Ne(m,S);C(I);const D=new FileReader;D.onloadend=()=>{R({...h,featured_image:D.result})},D.readAsDataURL(I)}catch(S){console.error("Error compressing the image:",S)}};v.useEffect(()=>{e&&(R({name:e.name,description:e.description||"",sku:e.sku||"",barcode:e.barcode||"",featured_image:e.image_url?e.image_url:se,unit:e.unit||"PC",alert_quantity:e.alert_quantity||0,is_stock_managed:e.is_stock_managed||!1,is_active:e.is_active||!1,brand_id:e.brand_id||"",category_id:e.category_id||"",product_type:e.product_type||"simple",fixed_commission:e.fixed_commission||0}),E(e.is_stock_managed.toString()),M(c.find(l=>l.id===e.brand_id)),P(K.find(l=>l.id===e.category_id)))},[e]);const $=v.useRef(null);v.useEffect(()=>{$.current.focus()},[]);const F=(l,m)=>{E(m?"1":"0")},Oe=l=>{if(l.preventDefault(),x)return;j(!0);const m=new FormData(l.currentTarget);b&&m.append("featured_image",b);const S=Object.fromEntries(m.entries());S.brand_id=N?.id??"",S.category_id=U?.id??"";const I=e?`/products/${e.id}`:"/products";Le.post(I,S,{forceFormData:!0,onSuccess:D=>{pe.fire({title:"Success!",text:"Successfully saved",icon:"success",position:"bottom-end",showConfirmButton:!1,timer:2e3,timerProgressBar:!0,toast:!0}),j(!1)},onError:D=>{const q=Object.values(D).flat().join(" | ");pe.fire({title:"Error!",text:q||"An unexpected error occurred.",icon:"error",confirmButtonText:"OK"}),j(!1)}})};return s.jsx(Pe,{children:s.jsxs(de,{keyName:"Control+s",onKeyDown:(l,m)=>{m.preventDefault(),l==="Control+s"&&document.getElementById("product-form").requestSubmit()},children:[s.jsx(Me,{title:"Products"}),s.jsxs("form",{id:"product-form",encType:"multipart/form-data",onSubmit:Oe,children:[s.jsx("input",{name:"is_stock_managed",type:"hidden",value:k}),s.jsx(J,{className:"mb-10",children:s.jsxs(Ue,{"aria-label":"breadcrumb",children:[s.jsxs(ue,{underline:"hover",sx:{display:"flex",alignItems:"center"},color:"inherit",href:"/",children:[s.jsx($e,{sx:{mr:.5},fontSize:"inherit"}),"Home"]}),s.jsx(ue,{underline:"hover",color:"inherit",href:"/products",children:"Products"}),s.jsx(oe,{sx:{color:"text.primary"},children:e?"Edit Product":"Add Product"})]})}),s.jsxs(u,{container:!0,spacing:2,children:[s.jsx(u,{size:{xs:12,sm:3},children:s.jsx(z,{size:"large",label:"Barcode",id:"barcode",name:"barcode",fullWidth:!0,required:!0,value:h.barcode,onChange:f,autoFocus:!0,ref:$,onFocus:l=>{l.target.select()}})}),s.jsx(u,{size:{xs:12,sm:7},children:s.jsx(z,{size:"large",label:"Product Name",name:"name",fullWidth:!0,required:!0,value:h.name,onChange:f})}),s.jsx(u,{size:{xs:12,sm:2},children:s.jsxs(z,{size:"large",value:h.unit,label:"Product Unit",onChange:f,name:"unit",select:!0,fullWidth:!0,children:[s.jsx(A,{value:"PC",children:"PC"}),s.jsx(A,{value:"KG",children:"KG"}),s.jsx(A,{value:"Meter",children:"Meter"})]})})]}),s.jsx(J,{className:"sm:columns-1 md:columns-2 mb-4",children:s.jsx("div",{})}),s.jsx(fe,{}),s.jsx(J,{sx:{mt:2,mb:2},children:s.jsx(oe,{variant:"h5",color:"initial",children:"Stock"})}),s.jsxs(u,{container:!0,spacing:2,children:[!e&&s.jsxs(s.Fragment,{children:[s.jsx(u,{size:{xs:6,sm:2},className:"mb-3",children:s.jsx(z,{size:"large",label:"Cost",name:"cost",type:"number",fullWidth:!0,required:!0,step:.5,slotProps:{input:{step:.5}},value:h.cost,onChange:f})}),s.jsx(u,{size:{xs:6,sm:2},className:"mb-3",children:s.jsx(z,{size:"large",label:"Price",name:"price",type:"number",fullWidth:!0,required:!0,slotProps:{input:{min:0}},value:h.price,onChange:f})}),s.jsx(u,{size:{xs:6,sm:2},className:"mb-3",children:s.jsx(z,{size:"large",label:"Quantity",name:"quantity",type:"number",fullWidth:!0,required:!0,step:.5,slotProps:{input:{step:.5}},value:h.quantity,onChange:f})}),s.jsx(u,{size:{xs:6,sm:2},className:"mb-3",children:s.jsx(z,{size:"large",label:"Discount Percentage %",name:"discount_percentage",type:"number",fullWidth:!0,value:h.discount_percentage,onChange:f,required:!0})}),s.jsx(u,{size:{xs:6,sm:2},className:"mb-3",children:s.jsx(z,{size:"large",label:"Flat Discount",name:"discount",type:"number",fullWidth:!0,value:h.discount,onChange:f,required:!0})}),s.jsx(u,{size:{xs:6,sm:2},className:"mb-3",children:s.jsx(z,{size:"large",label:"Batch number",name:"batch_number",fullWidth:!0,value:h.batch_number,onChange:f})}),s.jsx(u,{size:{xs:12,sm:4},className:"mb-3",children:s.jsx(De,{className:"w-full",placeholder:"Select a supplier...",name:"contact_id",styles:{control:(l,m)=>({...l,height:"55px"})},options:r,isClearable:!0,getOptionLabel:l=>l.name,getOptionValue:l=>l.id})}),s.jsx(u,{size:{xs:6,sm:2},className:"mb-3",children:s.jsx(Fe,{dateAdapter:Ie,adapterLocale:"en-gb",children:s.jsx(qe,{name:"expiry_date",label:"Expiry Date",className:"w-full",format:"YYYY-MM-DD"})})})]}),s.jsx(u,{size:{xs:6,sm:2},className:"mb-3",children:s.jsx(ct,{color:"primary",value:k,exclusive:!0,onChange:F,"aria-label":"Manage stock",id:"btn-manage-stock",variant:"contained",fullWidth:!0,size:"large",children:s.jsx(it,{value:"1",sx:{color:"black","&.Mui-selected":{bgcolor:"success.dark",color:"white","&:hover":{bgcolor:"success.dark"}}},variant:"contained",children:"Manage Stock"})})}),s.jsx(u,{size:{xs:6,sm:2},className:"mb-3",children:s.jsx(z,{size:"large",label:"Alert Quantity",id:"alert-quantity",name:"alert_quantity",type:"number",fullWidth:!0,onChange:f,value:h.alert_quantity})}),s.jsx(u,{size:{xs:6,sm:2},mb:2,children:s.jsxs(z,{size:"large",label:"Product Type",name:"product_type",select:!0,fullWidth:!0,onChange:f,value:h.product_type,required:!0,children:[s.jsx(A,{value:"simple",children:"SIMPLE"}),s.jsx(A,{value:"reload",children:"RELOAD"}),s.jsx(A,{value:"commission",children:"COMMISSION"}),s.jsx(A,{value:"custom",children:"CUSTOM"})]})}),(h.product_type==="reload"||h.product_type==="commission")&&s.jsx(u,{size:{xs:6,sm:2},className:"mb-3",children:s.jsx(z,{size:"large",label:h.product_type==="reload"?"Commission (%)":"Fixed Commission",name:"fixed_commission",type:"number",fullWidth:!0,required:!0,onChange:f,value:h.fixed_commission})})]}),s.jsx(fe,{}),s.jsx(oe,{variant:"h5",sx:{mt:2},color:"initial",children:"More Information"}),s.jsxs(u,{container:!0,spacing:2,className:"mt-3",children:[s.jsx(u,{size:{xs:6,sm:2},children:s.jsx(me,{size:"large",disablePortal:!0,value:N||null,onChange:(l,m)=>{M(m)},getOptionLabel:l=>l.label,options:c,fullWidth:!0,id:"brand",renderInput:l=>s.jsx(z,{...l,label:"Brand"})})}),s.jsx(u,{size:{xs:6,sm:2},children:s.jsx(me,{size:"large",disablePortal:!0,value:U||null,onChange:(l,m)=>{P(m)},options:K,getOptionLabel:l=>l.label,fullWidth:!0,id:"category",renderInput:l=>s.jsx(z,{...l,label:"Category"})})}),s.jsx(u,{size:{xs:12,sm:8},children:s.jsx(z,{size:"large",label:"Product Description",id:"product-description",name:"description",fullWidth:!0,value:h.description,onChange:f})})]}),s.jsx(J,{sx:{flexGrow:1},className:"pb-16 mt-4",children:s.jsx(u,{container:!0,spacing:2,children:s.jsx(u,{size:{xs:12,md:12},className:"flex justify-center",children:s.jsxs(Ye,{sx:{width:{xs:"70%",sm:350}},children:[s.jsx(Xe,{sx:{height:{xs:150,sm:300}},image:h.featured_image??se}),s.jsx(Qe,{className:"mt-0",children:s.jsxs(re,{component:"label",role:void 0,variant:"contained",tabIndex:-1,startIcon:s.jsx(Ae,{}),fullWidth:!0,children:["Upload image",s.jsx(jt,{type:"file",accept:"image/*",onChange:_,name:"featured_image"})]})})]})})})}),s.jsx(Je,{position:"fixed",variant:"contained",sx:{top:"auto",bottom:0},children:s.jsx(Ze,{children:s.jsxs(u,{container:!0,justifyContent:"flex-end",size:12,width:"100%",spacing:2,children:[s.jsx(u,{size:{xs:6,sm:2},children:s.jsx(re,{fullWidth:!0,variant:"contained",color:"warning",size:"large",startIcon:s.jsx(We,{}),sx:{mr:"1rem"},onClick:()=>window.history.back(),children:"BACK"})}),s.jsx(u,{size:{xs:6,sm:2},children:s.jsx(re,{fullWidth:!0,variant:"contained",type:"submit",color:"success",size:"large",endIcon:s.jsx(Re,{}),disabled:x,children:"SAVE"})})]})})})]})]})})}export{so as default};
