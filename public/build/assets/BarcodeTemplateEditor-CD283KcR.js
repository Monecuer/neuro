import{r as l,j as e,b as V}from"./app-J0J4XT7Q.js";import{S as G}from"./sweetalert2.esm.all-5zhdP7Ax.js";import{J as me}from"./JsBarcode-jjqzL-A9.js";import{B as u}from"./Box-m8-AwHvJ.js";import{T as c}from"./Typography-CWhVrPo-.js";import{A as K}from"./Alert-Cg00dAYx.js";import{P as O}from"./Paper-CavyNtF_.js";import{S as Q}from"./Stack-DcJo7WSp.js";import{T as ee}from"./Tooltip-CQRdrBam.js";import{I as te}from"./IconButton-CxCxJBhO.js";import{c as oe}from"./createLucideIcon-CMxlCnxM.js";import{D as ue}from"./Divider-CCoppV9R.js";import{c as F}from"./clsx-B-dksMZM.js";import{g as J,a as Y,u as X,s as k,c as Z,m as z}from"./memoTheme-BNdxtxoW.js";import{u as R}from"./useSlot-DIICVg-0.js";import{u as xe}from"./useControlled-CIU3udus.js";import{C as fe}from"./Collapse-CMBVb5gg.js";import{B as he}from"./ButtonBase-ah7Qb79a.js";import{C as L}from"./chevron-down-CG2MU_w-.js";import{G as A}from"./Grid-ByMND7DF.js";import{T as _}from"./TextField-B8xGzqYR.js";import{C as ge}from"./Chip-rj_j5-pw.js";import{C as be}from"./Card-B0NA572v.js";import{C as ye}from"./CardContent-B-mRR1qP.js";import"./app-CxSMgHDY.js";import"./useTheme-CwSUTWIJ.js";import"./extendSxProp-CT-SW93I.js";import"./index-i2kla6Uj.js";import"./emotion-react.browser.esm-BQ7e9N_g.js";import"./createSimplePaletteValueFilter-bm0fmN_7.js";import"./createSvgIcon-DH-b1jMs.js";import"./Close-0jcZMw1s.js";import"./useThemeProps-ChzuPIZh.js";import"./index-DKn53RoO.js";import"./useTimeout-ijO9WPjY.js";import"./useId-bmtMxKKl.js";import"./TransitionGroupContext-CUmnvxwJ.js";import"./useForkRef-npmdbavI.js";import"./Portal-CVCC_lll.js";import"./index-FrVc2Q_M.js";import"./Grow-Bu5k9bsZ.js";import"./Popper-DhnmPy4J.js";import"./ownerDocument-DW-IO8s5.js";import"./useSlotProps-BwjvMvhT.js";import"./CircularProgress-Bcsy1Pin.js";import"./dividerClasses-C03W2_nD.js";import"./index-BPJnJB5S.js";import"./isMuiElement-glFYcxXS.js";import"./useFormControl-bsSDraOa.js";import"./ownerWindow-HkKU3E4x.js";import"./debounce-Be36O1Ab.js";import"./mergeSlotProps-D_PRovB-.js";import"./Modal-r73ew4B0.js";import"./List-CA8Dfjeu.js";import"./ListContext-BTargF9Z.js";const re=l.createContext({});function je(t){return Y("MuiAccordion",t)}const $=J("MuiAccordion",["root","heading","rounded","expanded","disabled","gutters","region"]),ve=t=>{const{classes:r,square:n,expanded:p,disabled:m,disableGutters:x}=t;return Z({root:["root",!n&&"rounded",p&&"expanded",m&&"disabled",!x&&"gutters"],heading:["heading"],region:["region"]},je,r)},Ce=k(O,{name:"MuiAccordion",slot:"Root",overridesResolver:(t,r)=>{const{ownerState:n}=t;return[{[`& .${$.region}`]:r.region},r.root,!n.square&&r.rounded,!n.disableGutters&&r.gutters]}})(z(({theme:t})=>{const r={duration:t.transitions.duration.shortest};return{position:"relative",transition:t.transitions.create(["margin"],r),overflowAnchor:"none","&::before":{position:"absolute",left:0,top:-1,right:0,height:1,content:'""',opacity:1,backgroundColor:(t.vars||t).palette.divider,transition:t.transitions.create(["opacity","background-color"],r)},"&:first-of-type":{"&::before":{display:"none"}},[`&.${$.expanded}`]:{"&::before":{opacity:0},"&:first-of-type":{marginTop:0},"&:last-of-type":{marginBottom:0},"& + &":{"&::before":{display:"none"}}},[`&.${$.disabled}`]:{backgroundColor:(t.vars||t).palette.action.disabledBackground}}}),z(({theme:t})=>({variants:[{props:r=>!r.square,style:{borderRadius:0,"&:first-of-type":{borderTopLeftRadius:(t.vars||t).shape.borderRadius,borderTopRightRadius:(t.vars||t).shape.borderRadius},"&:last-of-type":{borderBottomLeftRadius:(t.vars||t).shape.borderRadius,borderBottomRightRadius:(t.vars||t).shape.borderRadius,"@supports (-ms-ime-align: auto)":{borderBottomLeftRadius:0,borderBottomRightRadius:0}}}},{props:r=>!r.disableGutters,style:{[`&.${$.expanded}`]:{margin:"16px 0"}}}]}))),Se=k("h3",{name:"MuiAccordion",slot:"Heading"})({all:"unset"}),we=k("div",{name:"MuiAccordion",slot:"Region"})({}),N=l.forwardRef(function(r,n){const p=X({props:r,name:"MuiAccordion"}),{children:m,className:x,defaultExpanded:f=!1,disabled:g=!1,disableGutters:j=!1,expanded:D,onChange:b,square:P=!1,slots:w={},slotProps:a={},TransitionComponent:y,TransitionProps:E,...W}=p,[i,v]=xe({controlled:D,default:f,name:"Accordion",state:"expanded"}),C=l.useCallback(pe=>{v(!i),b&&b(pe,!i)},[i,b,v]),[T,...I]=l.Children.toArray(m),B=l.useMemo(()=>({expanded:i,disabled:g,disableGutters:j,toggle:C}),[i,g,j,C]),S={...p,square:P,disabled:g,disableGutters:j,expanded:i},o=ve(S),s={transition:y,...w},d={transition:E,...a},h={slots:s,slotProps:d},[H,se]=R("root",{elementType:Ce,externalForwardedProps:{...h,...W},className:F(o.root,x),shouldForwardComponentProp:!0,ownerState:S,ref:n,additionalProps:{square:P}}),[ne,ae]=R("heading",{elementType:Se,externalForwardedProps:h,className:o.heading,ownerState:S}),[ie,le]=R("transition",{elementType:fe,externalForwardedProps:h,ownerState:S}),[ce,de]=R("region",{elementType:we,externalForwardedProps:h,ownerState:S,className:o.region,additionalProps:{"aria-labelledby":T.props.id,id:T.props["aria-controls"],role:"region"}});return e.jsxs(H,{...se,children:[e.jsx(ne,{...ae,children:e.jsx(re.Provider,{value:B,children:T})}),e.jsx(ie,{in:i,timeout:"auto",...le,children:e.jsx(ce,{...de,children:I})})]})});function Ae(t){return Y("MuiAccordionDetails",t)}J("MuiAccordionDetails",["root"]);const Pe=t=>{const{classes:r}=t;return Z({root:["root"]},Ae,r)},Te=k("div",{name:"MuiAccordionDetails",slot:"Root"})(z(({theme:t})=>({padding:t.spacing(1,2,2)}))),U=l.forwardRef(function(r,n){const p=X({props:r,name:"MuiAccordionDetails"}),{className:m,...x}=p,f=p,g=Pe(f);return e.jsx(Te,{className:F(g.root,m),ref:n,ownerState:f,...x})});function Re(t){return Y("MuiAccordionSummary",t)}const M=J("MuiAccordionSummary",["root","expanded","focusVisible","disabled","gutters","contentGutters","content","expandIconWrapper"]),ke=t=>{const{classes:r,expanded:n,disabled:p,disableGutters:m}=t;return Z({root:["root",n&&"expanded",p&&"disabled",!m&&"gutters"],focusVisible:["focusVisible"],content:["content",n&&"expanded",!m&&"contentGutters"],expandIconWrapper:["expandIconWrapper",n&&"expanded"]},Re,r)},De=k(he,{name:"MuiAccordionSummary",slot:"Root"})(z(({theme:t})=>{const r={duration:t.transitions.duration.shortest};return{display:"flex",width:"100%",minHeight:48,padding:t.spacing(0,2),transition:t.transitions.create(["min-height","background-color"],r),[`&.${M.focusVisible}`]:{backgroundColor:(t.vars||t).palette.action.focus},[`&.${M.disabled}`]:{opacity:(t.vars||t).palette.action.disabledOpacity},[`&:hover:not(.${M.disabled})`]:{cursor:"pointer"},variants:[{props:n=>!n.disableGutters,style:{[`&.${M.expanded}`]:{minHeight:64}}}]}})),Ee=k("span",{name:"MuiAccordionSummary",slot:"Content"})(z(({theme:t})=>({display:"flex",textAlign:"start",flexGrow:1,margin:"12px 0",variants:[{props:r=>!r.disableGutters,style:{transition:t.transitions.create(["margin"],{duration:t.transitions.duration.shortest}),[`&.${M.expanded}`]:{margin:"20px 0"}}}]}))),We=k("span",{name:"MuiAccordionSummary",slot:"ExpandIconWrapper"})(z(({theme:t})=>({display:"flex",color:(t.vars||t).palette.action.active,transform:"rotate(0deg)",transition:t.transitions.create("transform",{duration:t.transitions.duration.shortest}),[`&.${M.expanded}`]:{transform:"rotate(180deg)"}}))),q=l.forwardRef(function(r,n){const p=X({props:r,name:"MuiAccordionSummary"}),{children:m,className:x,expandIcon:f,focusVisibleClassName:g,onClick:j,slots:D,slotProps:b,...P}=p,{disabled:w=!1,disableGutters:a,expanded:y,toggle:E}=l.useContext(re),W=d=>{E&&E(d),j&&j(d)},i={...p,expanded:y,disabled:w,disableGutters:a},v=ke(i),C={slots:D,slotProps:b},[T,I]=R("root",{ref:n,shouldForwardComponentProp:!0,className:F(v.root,x),elementType:De,externalForwardedProps:{...C,...P},ownerState:i,additionalProps:{focusRipple:!1,disableRipple:!0,disabled:w,"aria-expanded":y,focusVisibleClassName:F(v.focusVisible,g)},getSlotProps:d=>({...d,onClick:h=>{d.onClick?.(h),W(h)}})}),[B,S]=R("content",{className:v.content,elementType:Ee,externalForwardedProps:C,ownerState:i}),[o,s]=R("expandIconWrapper",{className:v.expandIconWrapper,elementType:We,externalForwardedProps:C,ownerState:i});return e.jsxs(T,{...I,children:[e.jsx(B,{...S,children:m}),f&&e.jsx(o,{...s,children:f})]})});/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Me=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]],ze=oe("rotate-ccw",Me);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ie=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],Be=oe("save",Ie),$t=({settings:t})=>{const[r,n]=l.useState(""),[p,m]=l.useState(!0),[x,f]=l.useState(!1),[g,j]=l.useState(null),[D,b]=l.useState([]),[P,w]=l.useState(""),[a,y]=l.useState({format:"CODE128",width:2,height:35,fontSize:14}),E=["CODE128","EAN13","CODE39","UPC"],W=[{name:"product_name",description:"Product/item name"},{name:"price",description:"Product price"},{name:"barcode_code",description:"Barcode code/number"},{name:"store_name",description:"Store/shop name"},{name:"date",description:"Current date"}],[i,v]=l.useState({product_name:"ABC Product - XYZ",price:"1,000.00 Rs.",barcode_code:"8718719850268",store_name:"Main Store",date:new Date().toLocaleDateString()});l.useEffect(()=>{C()},[]),l.useEffect(()=>{r&&T()},[r,i,a]);const C=async()=>{try{m(!0);const o=await V.get("/api/barcode-template");n(o.data.template||""),o.data.barcode_settings&&y(o.data.barcode_settings),j(null)}catch(o){console.error("Error fetching template:",o),j("Failed to load barcode template"),n("")}finally{m(!1)}},T=async()=>{if(!r.trim()){w(""),b([]);return}try{const o=await V.post("/api/barcode-template/preview",{template:r,sample_data:i,barcode_settings:a});w(o.data.rendered),b([]),setTimeout(()=>{try{const s=document.getElementById("barcode-svg");s&&i.barcode_code&&me(s,i.barcode_code,{format:a.format,width:a.width,height:a.height,fontSize:a.fontSize})}catch(s){console.error("Error generating barcode:",s)}},100)}catch(o){o.response?.data?.errors?b(o.response.data.errors):b([o.message||"Error rendering preview"]),w("")}},I=async()=>{if(!r.trim()){G.fire("Warning","Template cannot be empty","warning");return}try{f(!0),await V.post("/api/barcode-template",{template:r,barcode_settings:a}),G.fire({title:"Success!",text:"Barcode template updated successfully",icon:"success",showConfirmButton:!1,timer:2e3,timerProgressBar:!0})}catch(o){const s=o.response?.data?.message||"Failed to save template",d=o.response?.data?.errors||[];G.fire({title:"Error",html:`
                    <div style="text-align: left;">
                        <p>${s}</p>
                        ${d.length>0?`<ul>${d.map(h=>`<li>${h}</li>`).join("")}</ul>`:""}
                    </div>
                `,icon:"error"})}finally{f(!1)}},B=(o,s)=>{v(d=>({...d,[o]:s}))},S=o=>{const s=document.getElementById("template-textarea");if(s){const d=s.selectionStart,h=s.selectionEnd,H=r.substring(0,d)+`{{${o}}}`+r.substring(h);n(H),setTimeout(()=>{s.selectionStart=s.selectionEnd=d+o.length+4,s.focus()},0)}};return p?e.jsx(u,{sx:{p:3,textAlign:"center"},children:e.jsx(c,{children:"Loading template..."})}):e.jsxs(u,{sx:{display:"flex",flexDirection:"column",gap:3},children:[g&&e.jsx(K,{severity:"error",children:g}),e.jsxs(O,{elevation:2,sx:{p:3},children:[e.jsxs(u,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:2},children:[e.jsx(c,{variant:"h6",sx:{fontWeight:600},children:"Barcode Template Editor"}),e.jsxs(Q,{direction:"row",spacing:1,children:[e.jsx(ee,{title:"Save Template",children:e.jsx(te,{size:"large",onClick:I,disabled:x,color:"success",sx:{backgroundColor:"rgba(76, 175, 80, 0.1)","&:hover":{backgroundColor:"rgba(76, 175, 80, 0.2)"}},children:e.jsx(Be,{size:24})})}),e.jsx(ee,{title:"Reset Template",children:e.jsx(te,{size:"large",onClick:C,disabled:x,color:"info",sx:{backgroundColor:"rgba(33, 150, 243, 0.1)","&:hover":{backgroundColor:"rgba(33, 150, 243, 0.2)"}},children:e.jsx(ze,{size:24})})})]})]}),e.jsx(ue,{sx:{mb:3}}),e.jsxs(N,{defaultExpanded:!0,sx:{mb:3,boxShadow:"none",border:"1px solid #e0e0e0"},children:[e.jsx(q,{expandIcon:e.jsx(L,{size:20}),children:e.jsx(c,{variant:"subtitle2",sx:{fontWeight:500},children:"Barcode Format Settings"})}),e.jsx(U,{sx:{pt:2},children:e.jsxs(A,{container:!0,spacing:2,children:[e.jsx(A,{item:!0,xs:12,sm:6,md:3,children:e.jsxs(u,{sx:{display:"flex",flexDirection:"column",gap:.5},children:[e.jsx(c,{variant:"caption",sx:{fontWeight:500,color:"#666"},children:"Format"}),e.jsx("select",{value:a.format,onChange:o=>y({...a,format:o.target.value}),style:{padding:"8px",borderRadius:"4px",border:"1px solid #ccc",fontFamily:"inherit",fontSize:"0.875rem"},children:E.map(o=>e.jsx("option",{value:o,children:o},o))})]})}),e.jsx(A,{item:!0,xs:12,sm:6,md:3,children:e.jsxs(u,{sx:{display:"flex",flexDirection:"column",gap:.5},children:[e.jsx(c,{variant:"caption",sx:{fontWeight:500,color:"#666"},children:"Width"}),e.jsx(_,{type:"number",value:a.width,onChange:o=>y({...a,width:parseFloat(o.target.value)||0}),inputProps:{step:.1,min:.5,max:10},size:"small",fullWidth:!0})]})}),e.jsx(A,{item:!0,xs:12,sm:6,md:3,children:e.jsxs(u,{sx:{display:"flex",flexDirection:"column",gap:.5},children:[e.jsx(c,{variant:"caption",sx:{fontWeight:500,color:"#666"},children:"Height"}),e.jsx(_,{type:"number",value:a.height,onChange:o=>y({...a,height:parseInt(o.target.value)||0}),inputProps:{step:1,min:10,max:200},size:"small",fullWidth:!0})]})}),e.jsx(A,{item:!0,xs:12,sm:6,md:3,children:e.jsxs(u,{sx:{display:"flex",flexDirection:"column",gap:.5},children:[e.jsx(c,{variant:"caption",sx:{fontWeight:500,color:"#666"},children:"Font Size"}),e.jsx(_,{type:"number",value:a.fontSize,onChange:o=>y({...a,fontSize:parseInt(o.target.value)||0}),inputProps:{step:1,min:8,max:32},size:"small",fullWidth:!0})]})})]})})]}),e.jsxs(A,{container:!0,spacing:3,children:[e.jsxs(A,{item:!0,xs:12,md:4,sx:{display:"flex",flexDirection:"column",gap:1},children:[e.jsxs(u,{sx:{display:"flex",flexDirection:"column"},children:[e.jsx(c,{variant:"subtitle2",sx:{mb:1,fontWeight:500},children:"Template HTML"}),e.jsx(_,{id:"template-textarea",multiline:!0,fullWidth:!0,value:r,onChange:o=>n(o.target.value),placeholder:"Enter HTML template with {{variable}} placeholders",rows:12,sx:{fontFamily:"monospace",fontSize:"0.85rem",backgroundColor:"#f5f5f5","& .MuiOutlinedInput-input":{resize:"vertical"}},variant:"outlined"})]}),e.jsxs(u,{sx:{mt:1},children:[e.jsxs(N,{defaultExpanded:!0,sx:{boxShadow:"none",border:"1px solid #e0e0e0"},children:[e.jsx(q,{expandIcon:e.jsx(L,{size:20}),children:e.jsx(c,{variant:"subtitle2",sx:{fontWeight:500},children:"Variables (Click to Insert)"})}),e.jsx(U,{sx:{pt:1},children:e.jsx(Q,{direction:"row",spacing:1,sx:{flexWrap:"wrap",gap:1},children:W.map(o=>e.jsx(ge,{label:`{{${o.name}}}`,onClick:()=>S(o.name),color:"primary",variant:"outlined",size:"small",sx:{cursor:"pointer"},title:o.description},o.name))})})]}),e.jsxs(N,{sx:{boxShadow:"none",border:"1px solid #e0e0e0",mt:1},children:[e.jsx(q,{expandIcon:e.jsx(L,{size:20}),children:e.jsx(c,{variant:"subtitle2",sx:{fontWeight:500},children:"Sample Data for Preview"})}),e.jsx(U,{sx:{pt:1},children:e.jsx(u,{sx:{display:"flex",flexDirection:"column",gap:1,width:"100%"},children:W.map(o=>e.jsx(_,{size:"small",label:o.name.replace(/_/g," ").toUpperCase(),value:i[o.name]||"",onChange:s=>B(o.name,s.target.value),placeholder:`{{${o.name}}}`,fullWidth:!0},o.name))})})]})]})]}),e.jsxs(A,{item:!0,xs:12,md:8,sx:{display:"flex",flexDirection:"column",gap:.5},children:[e.jsx(c,{variant:"subtitle2",sx:{fontWeight:500},children:"Live Preview"}),D.length>0&&e.jsx(K,{severity:"error",sx:{mb:1,py:.5},children:e.jsx("ul",{style:{margin:0,paddingLeft:"20px",fontSize:"0.8rem"},children:D.map((o,s)=>e.jsx("li",{children:o},s))})}),e.jsx(be,{sx:{backgroundColor:"#fafafa",display:"flex",flexDirection:"column",maxHeight:"600px"},children:e.jsx(ye,{sx:{overflowY:"auto",p:2,display:"flex",alignItems:"center",justifyContent:"center",width:"100%"},children:P?e.jsx(u,{sx:{p:2,backgroundColor:"white",border:"1px solid #e0e0e0",borderRadius:"4px",width:"100%",maxWidth:"320px",fontFamily:t.sale_print_font||"Arial, sans-serif"},dangerouslySetInnerHTML:{__html:P}}):e.jsx(u,{sx:{p:2,backgroundColor:"white",border:"1px dashed #cccccc",borderRadius:"4px",width:"100%",maxWidth:"320px",display:"flex",alignItems:"center",justifyContent:"center",color:"#999",textAlign:"center",minHeight:"300px"},children:e.jsx(c,{variant:"body2",children:"Enter template on the left to see preview"})})})})]})]})]}),e.jsxs(O,{elevation:1,sx:{p:2,backgroundColor:"#f0f7ff",border:"1px solid #b3d9ff"},children:[e.jsx(c,{variant:"subtitle2",sx:{mb:1,fontWeight:500,color:"#0066cc"},children:"ðŸ’¡ Template Tips"}),e.jsx(c,{variant:"body2",sx:{mb:.5,fontSize:"0.9rem"},children:"â€¢ Use HTML and CSS to structure your barcode template"}),e.jsxs(c,{variant:"body2",sx:{mb:.5,fontSize:"0.9rem"},children:["â€¢ Insert variables using double curly braces: ",e.jsx("code",{children:"{{variable_name}}"})]}),e.jsxs(c,{variant:"body2",sx:{mb:.5,fontSize:"0.9rem"},children:["â€¢ For barcodes, create an SVG element with ",e.jsx("code",{children:'id="barcode-svg"'})]}),e.jsx(c,{variant:"body2",sx:{fontSize:"0.9rem"},children:"â€¢ Click any variable chip on the left to insert it into your template"})]})]})};export{$t as default};
