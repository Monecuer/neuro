import{r as x,j as e,H as E,L as u,a as _}from"./app-J0J4XT7Q.js";import{A as w}from"./AuthenticatedLayout-CV1_pG3T.js";import{S as W}from"./Save-xe2518z_.js";import{A as H}from"./ArrowBackIosNew-mw4_sC1I.js";import{H as L}from"./Home-NRzDHtrK.js";import{S as y}from"./sweetalert2.esm.all-5zhdP7Ax.js";import{B as c}from"./Box-m8-AwHvJ.js";import{A as M}from"./AppBar-BfAA5r0X.js";import{T as R}from"./Toolbar-Bt5N0HeY.js";import{B as b}from"./Button-Bhgpz3NQ.js";import{B as P}from"./Breadcrumbs-DrlGONzO.js";import{G as o}from"./Grid-ByMND7DF.js";import{C}from"./Card-B0NA572v.js";import{C as N}from"./CardContent-B-mRR1qP.js";import{T as m}from"./TextField-B8xGzqYR.js";import{M as S}from"./MenuItem-D4ZeVUNG.js";import{F as T}from"./FormControlLabel-BrfCEOZg.js";import{C as A}from"./Checkbox-JPk1Ur6h.js";import"./app-CxSMgHDY.js";import"./createSvgIcon-DH-b1jMs.js";import"./clsx-B-dksMZM.js";import"./memoTheme-BNdxtxoW.js";import"./index-BPJnJB5S.js";import"./Payments-C74n1UUC.js";import"./Receipt-CfgyI0Rt.js";import"./index-BOh9Hbob.js";import"./index-B49xHE6m.js";import"./infoshop-CyNm3vmK.js";import"./Divider-CCoppV9R.js";import"./dividerClasses-C03W2_nD.js";import"./List-CA8Dfjeu.js";import"./ListContext-BTargF9Z.js";import"./ListItemButton-ChmwJdM0.js";import"./ListItemText-DbBV3q1i.js";import"./listItemTextClasses-BS0z-cUj.js";import"./useSlot-DIICVg-0.js";import"./useForkRef-npmdbavI.js";import"./Typography-CWhVrPo-.js";import"./index-i2kla6Uj.js";import"./extendSxProp-CT-SW93I.js";import"./useTheme-CwSUTWIJ.js";import"./emotion-react.browser.esm-BQ7e9N_g.js";import"./createSimplePaletteValueFilter-bm0fmN_7.js";import"./TransitionGroupContext-CUmnvxwJ.js";import"./ButtonBase-ah7Qb79a.js";import"./useTimeout-ijO9WPjY.js";import"./listItemIconClasses-CtCHhvqe.js";import"./Collapse-CMBVb5gg.js";import"./Portal-CVCC_lll.js";import"./index-FrVc2Q_M.js";import"./CssBaseline-BPSh959V.js";import"./IconButton-CxCxJBhO.js";import"./useId-bmtMxKKl.js";import"./CircularProgress-Bcsy1Pin.js";import"./Tooltip-CQRdrBam.js";import"./index-DKn53RoO.js";import"./useControlled-CIU3udus.js";import"./Grow-Bu5k9bsZ.js";import"./Popper-DhnmPy4J.js";import"./ownerDocument-DW-IO8s5.js";import"./useSlotProps-BwjvMvhT.js";import"./Drawer-BUnkvJCp.js";import"./mergeSlotProps-D_PRovB-.js";import"./debounce-Be36O1Ab.js";import"./ownerWindow-HkKU3E4x.js";import"./Modal-r73ew4B0.js";import"./Paper-CavyNtF_.js";import"./ListItem-BIq8gZj4.js";import"./isMuiElement-glFYcxXS.js";import"./useThemeProps-ChzuPIZh.js";import"./useFormControl-bsSDraOa.js";import"./SwitchBase-BD-arTUS.js";function it({charge:s,chargeTypes:k,rateTypes:B,pageLabel:f}){const n=!!s,[j,g]=x.useState(!1),[r,p]=x.useState({}),[t,I]=x.useState({name:s?.name||"",charge_type:s?.charge_type||"custom",rate_value:s?.rate_value||"",rate_type:s?.rate_type||"fixed",description:s?.description||"",is_active:s?.is_active??!0,is_default:s?.is_default??!1}),i=a=>{const{name:l,value:v,type:d,checked:D}=a.target;I(h=>({...h,[l]:d==="checkbox"?D:v})),r[l]&&p(h=>({...h,[l]:""}))},F=a=>{a.preventDefault(),g(!0),p({});const l=n?`/charges/${s.id}`:"/charges";_[n?"put":"post"](l,t,{onSuccess:()=>{y.fire({title:"Success!",text:n?"Charge updated successfully.":"Charge created successfully.",icon:"success"}).then(()=>{_.get("/charges")})},onError:d=>{p(d),y.fire({title:"Error!",text:"Please check the form for errors.",icon:"error"})},onFinish:()=>{g(!1)}})};return e.jsxs(w,{children:[e.jsx(E,{title:f}),e.jsxs(c,{className:"bg-gray-50 min-h-screen",children:[e.jsx(M,{position:"static",color:"default",elevation:1,children:e.jsxs(R,{children:[e.jsx(u,{href:"/charges",children:e.jsx(b,{startIcon:e.jsx(H,{}),color:"inherit",children:"Back"})}),e.jsx(c,{className:"flex-1"}),e.jsx(b,{variant:"contained",color:"primary",startIcon:e.jsx(W,{}),onClick:F,disabled:j,children:j?"Saving...":"Save"})]})}),e.jsx(c,{className:"p-6 bg-white border-b",children:e.jsxs(P,{children:[e.jsx(u,{href:"/",className:"text-blue-600",children:e.jsx(L,{fontSize:"small"})}),e.jsx(u,{href:"/charges",className:"text-blue-600",children:"Charges"}),e.jsx("span",{className:"text-gray-500",children:f})]})}),e.jsx(c,{className:"p-6",children:e.jsxs(o,{container:!0,spacing:3,children:[e.jsx(o,{item:!0,xs:12,md:8,children:e.jsx(C,{children:e.jsxs(N,{className:"space-y-4",children:[e.jsx("h2",{className:"text-xl font-semibold mb-4",children:n?"Edit Charge":"Create New Charge"}),e.jsx(m,{fullWidth:!0,label:"Name",name:"name",value:t.name,onChange:i,error:!!r.name,helperText:r.name,placeholder:"e.g., VAT (5%), Service Tax, Delivery Fee",variant:"outlined"}),e.jsx(m,{fullWidth:!0,select:!0,label:"Charge Type",name:"charge_type",value:t.charge_type,onChange:i,error:!!r.charge_type,helperText:r.charge_type,variant:"outlined",children:k.map(a=>e.jsx(S,{value:a,children:a.replace(/_/g," ").toUpperCase()},a))}),e.jsxs(o,{container:!0,spacing:2,children:[e.jsx(o,{item:!0,xs:12,md:6,children:e.jsx(m,{fullWidth:!0,label:"Rate Value",name:"rate_value",type:"number",inputProps:{step:"0.01",min:"0"},value:t.rate_value,onChange:i,error:!!r.rate_value,helperText:r.rate_value,placeholder:"e.g., 5 or 50",variant:"outlined"})}),e.jsx(o,{item:!0,xs:12,md:6,children:e.jsx(m,{fullWidth:!0,select:!0,label:"Rate Type",name:"rate_type",value:t.rate_type,onChange:i,error:!!r.rate_type,helperText:r.rate_type,variant:"outlined",children:B.map(a=>e.jsx(S,{value:a,children:a==="percentage"?"Percentage (%)":"Fixed Amount"},a))})})]}),e.jsx(m,{fullWidth:!0,multiline:!0,rows:4,label:"Description",name:"description",value:t.description,onChange:i,error:!!r.description,helperText:r.description,placeholder:"Add description for this charge...",variant:"outlined"}),e.jsx(T,{control:e.jsx(A,{name:"is_active",checked:t.is_active,onChange:i}),label:"Active"}),e.jsx(T,{control:e.jsx(A,{name:"is_default",checked:t.is_default,onChange:i}),label:"Auto-apply to all sales (Default)"})]})})}),e.jsx(o,{item:!0,xs:12,md:4,children:e.jsx(C,{children:e.jsxs(N,{children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Summary"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-600 text-sm",children:"Charge Type"}),e.jsx("p",{className:"text-lg font-semibold",children:t.charge_type.replace(/_/g," ").toUpperCase()})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-600 text-sm",children:"Rate"}),e.jsxs("p",{className:"text-lg font-semibold",children:[t.rate_value,t.rate_type==="percentage"?"%":""]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-600 text-sm",children:"Status"}),e.jsx("p",{className:`text-lg font-semibold ${t.is_active?"text-green-600":"text-red-600"}`,children:t.is_active?"Active":"Inactive"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-600 text-sm",children:"Default"}),e.jsx("p",{className:`text-lg font-semibold ${t.is_default?"text-blue-600":"text-gray-400"}`,children:t.is_default?"Auto-apply":"Manual"})]})]})]})})})]})})]})]})}export{it as default};
